{"version":3,"sources":["webpack:///./screen/view.js","webpack:///./layer/view.js","webpack:///./layer/threejs/view.js","webpack:///../~/three/examples/js/loaders/MTLLoader.js","webpack:///../~/three/examples/js/loaders/OBJLoader.js","webpack:///./layer/canvas/view.js","webpack:///./layer/img/view.js","webpack:///./layer/svg/view.js","webpack:///./layer/txt/view.js","webpack:///./layer/video/view.js"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,iCAAiC,WAAW;AAC5C,4CAA4C,iBAAiB,EAAE;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA,mDAAmD,eAAe;AAClE;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;;;;;;;;;;;;;;AAcA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,QAAQ;AACnC;AACA;AACA;AACA;;;AAGA;;AAEA,mCAAmC,qBAAqB;AACxD;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,mBAAmB,aAAa;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,qDAAqD,aAAa;AAClE;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO,YAAY,aAAa;AAChC;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD,4B;;;;;;;;AChRA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,mBAAmB,aAAa,SAAS,uFAAuF,WAAW,YAAY;AACxK,uCAAuC,WAAW,sBAAsB,kBAAkB,gBAAgB,eAAe;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,8CAA8C,SAAS;AACvD;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,2BAA2B,QAAQ;AACnC;AACA;AACA;AACA;;;AAGA;;AAEA,mCAAmC,qBAAqB;AACxD;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;AACD;AACA,2B;;;;;;;;ACrIA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,gCAAgC;AAChC;;AAEA;AACA,gCAAgC;AAChC;;AAEA;AACA,gCAAgC;AAChC;;AAEA;AACA;AACA;AACA;;AAEA,MAAM;AACN,MAAM;AACN,MAAM;;AAEN,cAAc,kBAAkB;AAChC;AACA,CAAC,IAAI;;AAEL,eAAe;AACf;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;AAMD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;AAID;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,0BAA0B,iDAAiD,GAAG,6BAA6B;AAC3G;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B,mCAAmC,GAAG,aAAa;AAC7E;AACA;;AAEA;AACA;AACA,CAAC;;;;AAID;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,gDAAgD,YAAY;AAC5D;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,mCAAmC;AACnC,uEAAuE;AACvE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,qBAAqB,GAAG,aAAa;AACrE,OAAO;AACP,KAAK;;AAEL;AACA;AACA,8BAA8B,qBAAqB,GAAG,aAAa;AACnE,KAAK;;;AAGL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,CAAC,E;;;;;;;ACxhBD;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,SAAS;AACrB,YAAY,SAAS;AACrB,YAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA,YAAY,OAAO;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kBAAkB,kBAAkB;;AAEpC;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,YAAY;AACZ;;AAEA,IAAI;;AAEJ;;AAEA;AACA;;AAEA,KAAK;;AAEL;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,mCAAmC;;AAEnC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,0BAA0B;;AAE1B;;AAEA;;AAEA;;AAEA;AACA,0BAA0B;;AAE1B;;AAEA;AACA;;AAEA,EAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;;;;;;;AC3hBA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAG;;AAEH,EAAE;;AAEF;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;AACA;AACA,gBAAgB;;AAEhB;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,MAAM;;AAEN;;AAEA;AACA;AACA;;AAEA;;AAEA,MAAM;;AAEN;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,gDAAgD,SAAS;AACzD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;;AAER;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,IAAI;;AAEJ;;AAEA;;AAEA;;AAEA;;AAEA,IAAI;;AAEJ;;AAEA;AACA;;AAEA,IAAI;;AAEJ;;AAEA;AACA;;AAEA,IAAI;;AAEJ;;AAEA;AACA;;AAEA,IAAI;;AAEJ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI;;AAEJ;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,IAAI;;AAEJ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI;;AAEJ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI;;AAEJ;;AAEA;AACA;;AAEA;AACA;;AAEA,IAAI;;AAEJ;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,MAAM;;AAEN;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,MAAM;;AAEN;;AAEA;AACA;;AAEA;;AAEA;;AAEA,IAAI;;AAEJ;;AAEA;;AAEA;AACA;;AAEA,0CAA0C,QAAQ;;AAElD;;AAEA;;AAEA,sCAAsC,SAAS;;AAE/C;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,oCAAoC,OAAO;;AAE3C;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;;AAEA;;AAEA,IAAI;;AAEJ;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA,KAAK;;AAEL;;AAEA;;AAEA,IAAI;;AAEJ;AACA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL,+CAA+C,WAAW;;AAE1D;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,IAAI;;AAEJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,IAAI;;AAEJ;;AAEA;;AAEA,IAAI;;AAEJ;;AAEA;;AAEA,IAAI;;AAEJ;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,IAAI;;AAEJ;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,4CAA4C,OAAO;;AAEnD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,IAAI;;AAEJ;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,8CAA8C,aAAa;;AAE3D;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,+CAA+C,aAAa;;AAE5D;AACA;;AAEA;;AAEA;AACA;;AAEA,IAAI;;AAEJ;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;;;;;;;;ACtuBA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA6B,aAAa;;AAE1C;AACA;AACA,KAAK;AACL;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,GAAG;;;AAGH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC,E;;;;;;;;AC5ED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,E;;;;;;;;AC1ED;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;ACxED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH,CAAC;AACD,8B;;;;;;;;ACdA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC,E","file":"6/build.js","sourcesContent":["'use strict';\nvar View = require('ampersand-view');\nvar LayerView = require('./../layer/view');\nrequire('./../layer/canvas/view');\nrequire('./../layer/svg/view');\nrequire('./../layer/video/view');\nrequire('./../layer/img/view');\nrequire('./../layer/threejs/view');\nrequire('./../layer/txt/view');\nrequire('./../layer/threejs/view');\n\n\nfunction signature(fn) {\n  var args = fn.toString().match('function[^(]*\\\\(([^)]*)\\\\)');\n  if (!args || !args[1].trim()) { return []; }\n  return args[1].split(',').map(function(a){ return a.trim(); });\n}\n\nvar signatures = {};\nfunction registerCommand(commandName, command) {\n  if (arguments.length === 1) {\n    if (typeof arguments[0] === 'function') {\n      command = arguments[0];\n      commandName = command.name;\n    }\n    else {\n      command = commands[arguments[0]];\n    }\n  }\n  else if (typeof command !== 'function') {\n    command = commands[commandName];\n  }\n  signatures[commandName] = signature(command);\n}\n\n\n\n\nvar commands = {\n  bootstrap: function bootstrap(layers) {\n    this.model.layers.reset(layers);\n    this.model.trigger('app:broadcast:bootstrap', {layers: layers});\n    this.resize();\n  },\n  updateLayer: function(layer) {\n    var state = this.model.layers.get(layer.name);\n    if (state) {\n      state.set(layer);\n    }\n    else {\n      state = this.model.layers.add(layer);\n    }\n  },\n  updateLayers: function(layers, audio) {\n    if (audio) this.model.audio = audio;\n    this.model.layers.set(layers);\n  }\n};\n\nObject.keys(commands).forEach(registerCommand);\n\n\nvar clientMixin = {};\nclientMixin.initializeClient = function initializeClient() {\n  var channel = new window.BroadcastChannel('spike');\n  var follower = this;\n  var commandArgs;\n\n  channel.addEventListener('message', function(evt) {\n    var commandName = evt.data.command;\n    var command = commands[commandName];\n\n    if (typeof command !== 'function') {\n      return;\n    }\n\n    if (!signatures[commandName]) {\n      return;\n    }\n\n    commandArgs = signatures[commandName].map(function(argName) {\n      if (argName === 'timeStamp') return evt.timeStamp;\n      return evt.data.payload[argName];\n    });\n\n    command.apply(follower, commandArgs);\n  });\n\n  this.channel = channel;\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar ScreenView = View.extend(clientMixin, {\n  autoRender: true,\n\n  template: '<div class=\"screen\"></div>',\n\n  session: {\n    width: ['number', true, 400],\n    height: ['number', true, 300],\n    captureMouse: ['boolean', true, false],\n    captureDebug: ['boolean', true, false]\n  },\n\n  initialize: function () {\n    if (!this.model) {\n      throw new Error('Missing model option for ScreenView');\n    }\n    this.initializeClient();\n  },\n\n  derived: {\n    styleEl: {\n      deps: ['el'],\n      fn: function() {\n        var el = document.getElementById('vf-screen-styles');\n        if (!el) {\n          el = document.createElement('style');\n          el.id = 'vf-screen-styles';\n          el.appendChild(document.createTextNode(''));\n          document.head.appendChild(el);\n        }\n        return el;\n      }\n    },\n    sheet: {\n      deps: ['styleEl'],\n      fn: function() {\n        return this.styleEl.sheet;\n      }\n    },\n    cssRule: {\n      deps: ['sheet'],\n      fn: function() {\n        if (this.sheet.cssRules.length === 0) {\n          this.addRule('', 'opacity:1');\n        }\n        return this.sheet.cssRules[0];\n      }\n    }\n  },\n\n  addRule: function(selector, properties) {\n    var sheet = this.sheet;\n    this.el.id = this.el.id || 'vf-screen-' + this.cid;\n    var prefix = '#'+ this.el.id +' ';\n    var index = sheet.cssRules.length;\n    selector = (prefix + selector).trim();\n    for (var i = index - 1; i >= 0; i--) {\n      if (sheet.cssRules[i].selectorText === selector) {\n        sheet.deleteRule(i);\n      }\n    }\n\n\n    index = sheet.cssRules.length;\n\n    sheet.insertRule(selector + ' { ' + properties + ' } ', index);\n    return this;\n  },\n\n  setProperty: function(...args) {\n    this.cssRule.style.setProperty(...args);\n  },\n\n  remove: function() {\n    if (this.channel) {\n      this.channel.close();\n    }\n    return View.prototype.remove.apply(this, arguments);\n  },\n\n  resize: function () {\n    if (!this.el) { return this; }\n    this.setProperty('position', 'fixed');\n    this.setProperty('top', 0);\n    this.setProperty('left', 0);\n    this.setProperty('width', '100%');\n    this.setProperty('height', '100%');\n    if (!this.el || !this.el.parentNode || !document.body.contains(this.el)) {\n      return this;\n    }\n    this.width = this.el.clientWidth;\n    this.height = this.el.clientHeight;\n    return this._resizeLayers();\n  },\n\n  _resizeLayers: function() {\n    if (!this.layersView || !this.layersView.views) { return this; }\n    var w = this.width;\n    var h = this.height;\n\n    this.layersView.views.forEach(function(view) {\n      view.width = w;\n      view.height = h;\n    });\n    return this;\n  },\n\n  render: function() {\n    if (!this.el) {\n      this.renderWithTemplate();\n    }\n\n    if (!this.layersView) {\n      this.layersView = this.renderCollection(this.model.layers, function(opts) {\n        var type = opts.model.getType();\n        var ScreenLayerConstructor = LayerView.types[type] || LayerView;\n        return new ScreenLayerConstructor(opts);\n      }, this.el, {parent: this});\n      this._updateLayers();\n    }\n\n    if (!this._ar) {\n      this._animate();\n    }\n\n    return this.resize();\n  },\n\n  update: function(options) {\n    if (!this.layersView) {\n      return this.render().update(options);\n    }\n\n    this.model.set(options);\n\n    return this;\n  },\n\n  _ar: null,\n  _animate: function(timestamp) {\n    this.model.frametime = timestamp || 0;\n    this._updateLayers();\n    this._ar = window.requestAnimationFrame(this._animate.bind(this));\n  },\n\n  _updateLayers: function() {\n    this.setProperty('--frametime', this.model.frametime);\n\n    var audio = this.model.audio;\n    if (audio && audio.frequency && audio.timeDomain) {\n      var length = audio.frequency.length;\n      var l, li = 0, af = 0, av = 0, ll = length / 16;\n\n      for (l = 0; l < length; l += ll) {\n        li++;\n        af += audio.frequency[l];\n        av += audio.timeDomain[l];\n        this.setProperty('--freq' + li, audio.frequency[l]);\n        this.setProperty('--vol' + li, audio.timeDomain[l]);\n      }\n      this.setProperty('--freqAvg', af / length);\n      this.setProperty('--volAvg', av / length);\n    }\n\n    this.layersView.views.forEach(function(subview) {\n      if (subview.model.active) subview.update();\n    });\n  }\n});\nmodule.exports = ScreenView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./screen/view.js\n// module id = 147\n// module chunks = 6","'use strict';\nvar View = require('ampersand-view');\n\nvar LayerView = View.extend({\n  template: function() {\n    return `\n      <div id=\"${this.model.getId()}\" view-id=\"${this.cid}\" class=\"missing-layer-view\" style=\"will-change:transform, opacity, backfaceVisibility;width:100%;height:100%;display:table\">\n        <div style=\"display:table-cell;color:#a66;vertical-align:middle;text-align:center;font-weight:700;font-size:30px;text-shadow:0 0 4px #000\">\n          Missing\n          <span data-hook=\"type\"></span> for\n          <span data-hook=\"name\"></span>\n          layer view\n          <br/>\n          <span data-hook=\"frametime\"></span>\n        </div>\n      </div>\n    `;\n  },\n\n  initialize: function() {\n    this.listenTo(this.model.styleProperties, 'change', function(prop) {\n      this.setProperty(prop.name, prop.value);\n    });\n  },\n\n  derived: {\n    styleEl: {\n      deps: [],\n      fn: function() {\n        var id = this.model.getId();\n        var el = document.getElementById('style-' + id);\n        if (!el) {\n          el = document.createElement('style');\n          el.id = 'style-' + id;\n          el.appendChild(document.createTextNode(''));\n          document.head.appendChild(el);\n        }\n        return el;\n      }\n    },\n    sheet: {\n      deps: ['styleEl'],\n      fn: function() {\n        return this.styleEl.sheet;\n      }\n    },\n    cssRule: {\n      deps: ['sheet', 'model.layerStyles'],\n      fn: function() {\n        if (this.sheet.cssRules.length === 0) {\n          this.addRule('', this.model.layerStyles);\n        }\n        return this.sheet.cssRules[0];\n      }\n    },\n    layerStyleObj: {\n      deps: ['model', 'model.layerStyles'],\n      fn: function() {\n        var exp = /[\\s]*([^:]+)[\\s]*:[\\s]*([^;]+)[\\s]*;[\\s]*/gim;\n        return ((this.model.layerStyles || '').match(exp) || [])\n          .map(s => s\n            .trim()\n            .split(':')\n              .map(ss => ss\n                .replace(';', '')\n                .trim()));\n      }\n    }\n  },\n\n  session: {\n    width: ['number', true, 400],\n    height: ['number', true, 300]\n  },\n\n  bindings: {\n    'model.type': '[data-hook=type]',\n    'model.name': '[data-hook=name]',\n    'model.active': {type: 'toggle'},\n    'model.layerStyles': {\n      type: function() {\n        var style = this.cssRule.style;\n        this.layerStyleObj.forEach(function(arr) {\n          style[arr[0]] = arr[1];\n        });\n      }\n    },\n    'model.opacity': {\n      type: function(el, val) {\n        this.cssRule.style.opacity = val * 0.01;\n      }\n    },\n    'model.zIndex': {\n      type: function(el, val) {\n        this.cssRule.style.zIndex = val;\n      }\n    }\n  },\n\n  setProperty: function(...args) {\n    this.cssRule.style.setProperty(...args);\n  },\n\n  addRule: function(selector, properties) {\n    var sheet = this.sheet;\n    var prefix = '#'+ this.model.getId() +' ';\n    var index = sheet.cssRules.length;\n    selector = (selector.indexOf('@') === 0 ? selector : prefix + selector).trim();\n    for (var i = index - 1; i >= 0; i--) {\n      if (sheet.cssRules[i].selectorText === selector) {\n        sheet.deleteRule(i);\n      }\n    }\n\n\n    index = sheet.cssRules.length;\n\n    sheet.insertRule(selector + ' { ' + properties + ' } ', index);\n    return this;\n  },\n\n  remove: function() {\n    // they are some issues with bootstraping a new setup if the element is removed\n    // var styleEl = this.styleEl;\n    // if (styleEl && styleEl.parentNode) {\n    //   styleEl.parentNode.removeChild(styleEl);\n    // }\n    return View.prototype.remove.apply(this, arguments);\n  },\n\n  update: function() {}\n});\nLayerView.types = {};\nmodule.exports = LayerView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/view.js\n// module id = 654\n// module chunks = 6","'use strict';\n// var assign = require('lodash.assign');\nvar ScreenLayerView = require('./../view');\n\nvar THREE = require('three');\nwindow.THREE = window.THREE || THREE;\n\n// require('three/examples/js/loaders/DDSLoader');\n// THREE.Loader.Handlers.add( /\\.dds$/i, new THREE.DDSLoader() );\nrequire('three/examples/js/loaders/MTLLoader');\nrequire('three/examples/js/loaders/OBJLoader');\n\n\nvar midiMinMax = require('./../../utils/midi-min-max');\nvar midi2Rad = require('./../../utils/midi2rad');\nvar midi2Prct = require('./../../utils/midi2prct');\n\n\nfunction noop() {}\n\nfunction compileFunction(func) {\n  var fn;\n\n  var evaled = `fn = (function() {\n  // override some stuff that should not be used\n  var navigator, window, global, document, module, exports;\n\n  return function() {\n    var layer = this;\n    var width = layer.width || 400;\n    var height = layer.height || 300;\n    var store = layer.cache = (layer.cache || {});\n    var frametime = layer ? layer.frametime : 0;\n    var audio = layer ? layer.audio : {};\n\n    var getLoaderViewByName = function(name) {\n      var filtered = layer.loaders.views.filter(v => v.model.name === name);\n      return filtered.length ? filtered[0] : false;\n    };\n\n    var bufferLength = function() {\n      return ((layer.audio || {}).bufferLength) || 128;\n    };\n\n    var frequency = function(x) {\n      return ((layer.audio || {}).frequency || [])[x] || 0;\n    };\n\n    var timeDomain = function(x) {\n      return ((layer.audio || {}).timeDomain || [])[x] || 0;\n    };\n\n    var parameter = function (name, deflt) {\n      var val = layer.model.parameters.get(name);\n      return val ? val.value : deflt;\n    };\n\n    ${ midiMinMax.toString() }\n    ${ midi2Rad.toString() }\n    ${ midi2Prct.toString() }\n\n    return (${ func.toString() })();\n  };\n})();`;\n\n  eval(evaled);// jshint ignore:line\n  return fn;\n}\n\nfunction bindObjectChange(source, destination, keys = ['x', 'y', 'z']) {\n  keys.forEach(function(key) {\n    source.on('change:' + key, function() {\n      destination[key] = source[key];\n    });\n  });\n}\n\nfunction bindObjectChanges(model, object) {\n  if (object.position) bindObjectChange(model.position, object.position);\n  if (object.rotation) bindObjectChange(model.rotation, object.rotation);\n  if (object.scale) bindObjectChange(model.scale, object.scale);\n  if (object.material && object.material.color && model.material && model.material.color) {\n    bindObjectChange(model.material.color, object.material.color, ['r', 'g', 'b']);\n  }\n}\n\nfunction makeThreeObjectInstance(model) {\n  var Constructor = THREE[model.threeClassName];\n  if (!Constructor) {\n    return;\n  }\n\n  var args = (model.signature || []).map(function(name) {\n    return model.get(name);\n  });\n  var object = new Constructor(...args);\n\n  if (!object.isGeometry) {\n    bindObjectChanges(model, object);\n    object.name = model.name;\n    return object;\n  }\n\n  var materialOptions = {\n    color: 0x00ff00\n  };\n\n  var materialClassName = 'MeshLambertMaterial';\n  if (model.material) {\n    if (model.material.color) {\n      var color = model.material.color;\n      materialOptions.color = new THREE.Color(color.r, color.g, color.b);\n    }\n  }\n\n  var material = new THREE[materialClassName](materialOptions);\n  var meshObject = new THREE.Mesh(object, material);\n  meshObject.name = model.name;\n  bindObjectChanges(model, meshObject);\n  return meshObject;\n}\n\nvar State = require('ampersand-state');\n\nvar ThreeObject = State.extend({\n  session: {\n    model: ['state', true, null]\n  },\n\n  derived: {\n    object: {\n      deps: ['model'],\n      fn: function() {\n        var model = this.model;\n        var object = this.scene.getObjectByName(model.name);\n\n        if (object) {\n          return;\n        }\n        return makeThreeObjectInstance(model);\n      }\n    },\n    scene: {\n      deps: ['parent'],\n      fn: function() {\n        return this.parent.scene;\n      }\n    }\n  },\n\n  render: function() {\n    // that sucks... but i don't want to duck punch the renderCollection function\n    this.el = document.createElement('div');\n    this.el.style.display = 'none';\n\n    var object = this.object;\n    if (object) this.scene.add(object);\n    return this;\n  },\n\n  remove: function() {\n    var object = this.object;\n    if (object) object.remove();\n    if (State.prototype.remove) State.prototype.remove.apply(this, arguments);\n    return this;\n  }\n});\n\n\n\n\n\n// function loaderProgress(what) {\n//   return function progress(xhr) {\n//     if (xhr.lengthComputable) {\n//       console.info('%s %s% loaded', what, (xhr.loaded / xhr.total * 100).toFixed(2));\n//     }\n//   };\n// }\nvar ThreeLoader = ThreeObject.extend({\n  session: {\n    loading: ['boolean', true, false],\n    loaded: ['any', false, null]\n  },\n\n  derived: {\n    object: {\n      deps: ['loaded'],\n      fn: function() {\n        return this.loaded;\n      }\n    },\n    manager: {\n      deps: ['parent'],\n      fn: function() {\n        return this.parent.manager;\n      }\n    }\n  },\n\n  addObj: function() {\n    var obj = this.object;\n    this.scene.add(obj);\n    return this;\n  },\n\n  initialize: function() {\n    ThreeObject.prototype.initialize.apply(this, arguments);\n    var view = this;\n\n    view.on('change:object', function() {\n      var prev = view.previousAttributes();\n      if (prev.object) {\n        prev.object.remove();\n      }\n      var obj = view.object;\n\n      var model = view.model;\n      if (model.material) {\n        if (model.material.color && obj.material) {\n          var color = model.material.color;\n          obj.material.color.setRGB(color.r, color.g, color.b);\n        }\n      }\n\n      view.addObj();\n    });\n\n    view.listenToAndRun(view.model, 'change:src change:path', function() {\n      if (!view.model.src || view.loading) return;\n\n      view.loading = true;\n      view.load(function() {\n        view.loading = false;\n      }, noop, function() {\n        view.loading = false;\n      });\n    });\n  },\n\n  load: function(done = noop, progress = noop, error = noop) {\n    console.info('stub load', done, progress, error);\n  },\n\n  render: function() {\n    // that sucks... but i don't want to duck punch the renderCollection function\n    this.el = document.createElement('div');\n    this.el.style.display = 'none';\n\n    return this;\n  },\n\n  remove: function() {\n    ThreeObject.prototype.remove.apply(this, arguments);\n    return this;\n  }\n});\n\n\nfunction applyTransformations(model, object) {\n  var s = model.scale;\n  var r = model.rotation;\n  var p = model.position;\n  object.scale.set(s.x, s.y, s.z);\n  object.rotation.set(r.x, r.y, r.z);\n  object.position.set(p.x, p.y, p.z);\n}\n\nThreeLoader.types = {};\nThreeLoader.types.obj = ThreeLoader.extend({\n  load: function(done, progress = noop, error = noop) {\n    var view = this;\n    var model = this.model;\n\n    var objLoader = new THREE.OBJLoader();\n    objLoader.setPath(model.path);\n\n    function objLoaded(object) {\n      object.name = model.name;\n      view.loaded = object;\n      applyTransformations(model, object);\n      done();\n    }\n\n    objLoader.load(model.src, objLoaded, progress, error);\n  }\n});\n\n\n\nThreeLoader.types.objmtl = ThreeLoader.extend({\n  derived: {\n    object: {\n      deps: ['loaded'],\n      fn: function() {\n        return this.loaded ? this.loaded.object : false;\n      }\n    }\n  },\n\n  addObj: function() {\n    var obj = this.object;\n    this.scene.add(obj);\n    return this;\n  },\n\n  load: function(done, progress = noop, error = noop) {\n    var view = this;\n    var model = this.model;\n\n    var objLoader = new THREE.OBJLoader();\n    objLoader.setPath(model.path);\n\n    function objLoaded(object) {\n      object.name = model.name;\n      view.set('loaded', {object: object, materials: view.loaded.materials}, {silent: false, trigger: true});\n      applyTransformations(model, object);\n      done();\n    }\n\n    var mtlLoader = new THREE.MTLLoader();\n    mtlLoader.setPath(model.path);\n\n    function mtlLoaded(materials) {\n      materials.preload();\n      objLoader.setMaterials(materials);\n      view.set('loaded', {materials: materials, object: null}, {silent: true});\n      objLoader.load(model.src, objLoaded, progress, error);\n    }\n\n    mtlLoader.load(model.mtl, mtlLoaded, progress, error);\n  }\n});\n\n\n\nmodule.exports = ScreenLayerView.types.threejs = ScreenLayerView.extend({\n  template: function() {\n    return '<div class=\"layer-threejs\" id=\"' + this.model.getId() + '\" view-id=\"' + this.cid + '\"></div>';\n  },\n\n  initialize: function() {\n    var view = this;\n    ScreenLayerView.prototype.initialize.apply(view, arguments);\n    window.THREE = window.THREE || THREE;\n    window['_threejsView' + view.cid] = view;\n    view.on('change:width change:height', view.resize);\n    view.on('change:model.renderFunction', function() {\n      view._cleanupScene()._renderScene();\n    });\n  },\n\n  resize: function() {\n    if (!this.renderer || !this.camera) return this;\n    this.camera.aspect = this.width / this.height;\n    this.camera.updateProjectionMatrix();\n    this.renderer.setSize(this.width, this.height);\n    return this;\n  },\n\n  derived: {\n    renderFn: {\n      deps: ['model.renderFunction'],\n      fn: function() {\n        var fn = compileFunction(this.model.renderFunction);\n        return fn.bind(this);\n      }\n    },\n    updateFn: {\n      deps: ['model.updateFunction'],\n      fn: function() {\n        var fn = compileFunction(this.model.updateFunction);\n        return fn.bind(this);\n      }\n    },\n    manager: {\n      deps: [],\n      fn: function() {\n        return new THREE.LoadingManager();\n      }\n    },\n    scene: {\n      deps: [],\n      fn: function() {\n        return new THREE.Scene();\n      }\n    },\n    renderer: {\n      deps: ['el'],\n      fn: function() {\n        if (!this.el) return;\n        var renderer = new THREE.WebGLRenderer({alpha: true});\n        renderer.setPixelRatio(window.devicePixelRatio);\n        renderer.setSize(this.width, this.height);\n        renderer.setClearColor(0x000000, 0);\n        return renderer;\n      }\n    },\n    camera: {\n      deps: ['scene', 'model.currentCamera', 'model.cameras'],\n      fn: function() {\n        if (!this.scene) return;\n        var model = this.model;\n        var info = model.currentCamera ?\n                    model.cameras.get(model.currentCamera) :\n                    model.cameras.at(0);\n\n        if (!info) {\n          info = {\n            name: 'defaultCamera',\n            fov: 45,\n            near: 1,\n            far: 2000,\n            position: {\n              x: 45,\n              y: 45,\n              z: 45\n            },\n            lookAt: {\n              x: 0,\n              y: 0,\n              z: 0\n            }\n          };\n        }\n\n        var camera = this.scene.getObjectByName(info.name);\n        if (!camera) {\n          camera = new THREE.PerspectiveCamera(info.fov, this.width / this.height, info.near, info.far);\n          camera.name = info.name;\n        }\n        else {\n          camera.fov = info.fov;\n          camera.aspect = this.width / this.height;\n          camera.near = info.near;\n          camera.far = info.far;\n        }\n\n        camera.lookAt(info.lookAt.x, info.lookAt.y, info.lookAt.z);\n\n        return camera;\n      }\n    }\n  },\n\n  _cleanupScene: function() {\n    var scene = this.scene;\n\n    function empty(elem) {\n      if (elem) {\n        while (elem.lastChild) elem.removeChild(elem.lastChild);\n      }\n    }\n\n    cancelAnimationFrame(scene.id);// Stop the animation\n    this.renderer.domElement.addEventListener('dblclick', null, false); //remove listener to render\n    scene.scene = null;\n    scene.projector = null;\n    scene.camera = null;\n    scene.controls = null;\n    empty(scene.modelContainer);\n\n    try {\n      this.el.removeChild(this.renderer.domElement);\n    } catch(up) {}\n\n    delete this._cache.renderer;\n    delete this._cache.camera;\n    delete this._cache.scene;\n\n    return this;\n  },\n\n  _renderScene: function() {\n    var view = this;\n    var fn = view.renderFn;\n\n    view.el.appendChild(view.renderer.domElement);\n\n    [\n      'geometries',\n      'cameras',\n      'lights'\n    ].forEach(function(collectionName) {\n      view[collectionName] = view[collectionName] || view.renderCollection(view.model[collectionName], function(options) {\n        return new ThreeObject({model: options.model}, {parent: view});\n      });\n    });\n\n    view.loaders = view.loaders || view.renderCollection(view.model.loaders, function(options) {\n      var Constructor = ThreeLoader.types[options.model.type] || ThreeLoader;\n      return new Constructor({model: options.model}, {parent: view});\n    });\n\n\n    if (typeof fn === 'function') {\n      try {\n        fn.call(view);\n      }\n      catch(up) {\n        console.log('renderFunction', up.message);\n      }\n    }\n\n    return view;\n  },\n\n  render: function() {\n    ScreenLayerView.prototype.render.apply(this, arguments);\n\n    this._renderScene();\n\n    this.update();\n    return this;\n  },\n\n  update: function() {\n    if (!this.camera) return;\n\n    var fn = this.updateFn;\n    if (typeof fn === 'function') {\n      try {\n        fn.call(this);\n      }\n      catch(up) {\n        console.log('updateFunction', up.message);\n      }\n    }\n\n    this.renderer.render(this.scene, this.camera);\n  },\n\n  remove: function() {\n    this._cleanupScene();\n    ScreenLayerView.prototype.remove.apply(this, arguments);\n  }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/threejs/view.js\n// module id = 676\n// module chunks = 6","/**\n * Loads a Wavefront .mtl file specifying materials\n *\n * @author angelxuanchang\n */\n\nTHREE.MTLLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.MTLLoader.prototype = {\n\n\tconstructor: THREE.MTLLoader,\n\n\t/**\n\t * Loads and parses a MTL asset from a URL.\n\t *\n\t * @param {String} url - URL to the MTL file.\n\t * @param {Function} [onLoad] - Callback invoked with the loaded object.\n\t * @param {Function} [onProgress] - Callback for download progress.\n\t * @param {Function} [onError] - Callback for download errors.\n\t *\n\t * @see setPath setTexturePath\n\t *\n\t * @note In order for relative texture references to resolve correctly\n\t * you must call setPath and/or setTexturePath explicitly prior to load.\n\t */\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( text ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\t/**\n\t * Set base path for resolving references.\n\t * If set this path will be prepended to each loaded and found reference.\n\t *\n\t * @see setTexturePath\n\t * @param {String} path\n\t *\n\t * @example\n\t *     mtlLoader.setPath( 'assets/obj/' );\n\t *     mtlLoader.load( 'my.mtl', ... );\n\t */\n\tsetPath: function ( path ) {\n\n\t\tthis.path = path;\n\n\t},\n\n\t/**\n\t * Set base path for resolving texture references.\n\t * If set this path will be prepended found texture reference.\n\t * If not set and setPath is, it will be used as texture base path.\n\t *\n\t * @see setPath\n\t * @param {String} path\n\t *\n\t * @example\n\t *     mtlLoader.setPath( 'assets/obj/' );\n\t *     mtlLoader.setTexturePath( 'assets/textures/' );\n\t *     mtlLoader.load( 'my.mtl', ... );\n\t */\n\tsetTexturePath: function ( path ) {\n\n\t\tthis.texturePath = path;\n\n\t},\n\n\tsetBaseUrl: function ( path ) {\n\n\t\tconsole.warn( 'THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead.' );\n\n\t\tthis.setTexturePath( path );\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t},\n\n\tsetMaterialOptions: function ( value ) {\n\n\t\tthis.materialOptions = value;\n\n\t},\n\n\t/**\n\t * Parses a MTL file.\n\t *\n\t * @param {String} text - Content of MTL file\n\t * @return {THREE.MTLLoader.MaterialCreator}\n\t *\n\t * @see setPath setTexturePath\n\t *\n\t * @note In order for relative texture references to resolve correctly\n\t * you must call setPath and/or setTexturePath explicitly prior to parse.\n\t */\n\tparse: function ( text ) {\n\n\t\tvar lines = text.split( '\\n' );\n\t\tvar info = {};\n\t\tvar delimiter_pattern = /\\s+/;\n\t\tvar materialsInfo = {};\n\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\t\tvar line = lines[ i ];\n\t\t\tline = line.trim();\n\n\t\t\tif ( line.length === 0 || line.charAt( 0 ) === '#' ) {\n\n\t\t\t\t// Blank line or comment ignore\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar pos = line.indexOf( ' ' );\n\n\t\t\tvar key = ( pos >= 0 ) ? line.substring( 0, pos ) : line;\n\t\t\tkey = key.toLowerCase();\n\n\t\t\tvar value = ( pos >= 0 ) ? line.substring( pos + 1 ) : '';\n\t\t\tvalue = value.trim();\n\n\t\t\tif ( key === 'newmtl' ) {\n\n\t\t\t\t// New material\n\n\t\t\t\tinfo = { name: value };\n\t\t\t\tmaterialsInfo[ value ] = info;\n\n\t\t\t} else if ( info ) {\n\n\t\t\t\tif ( key === 'ka' || key === 'kd' || key === 'ks' ) {\n\n\t\t\t\t\tvar ss = value.split( delimiter_pattern, 3 );\n\t\t\t\t\tinfo[ key ] = [ parseFloat( ss[ 0 ] ), parseFloat( ss[ 1 ] ), parseFloat( ss[ 2 ] ) ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinfo[ key ] = value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar materialCreator = new THREE.MTLLoader.MaterialCreator( this.texturePath || this.path, this.materialOptions );\n\t\tmaterialCreator.setCrossOrigin( this.crossOrigin );\n\t\tmaterialCreator.setManager( this.manager );\n\t\tmaterialCreator.setMaterials( materialsInfo );\n\t\treturn materialCreator;\n\n\t}\n\n};\n\n/**\n * Create a new THREE-MTLLoader.MaterialCreator\n * @param baseUrl - Url relative to which textures are loaded\n * @param options - Set of options on how to construct the materials\n *                  side: Which side to apply the material\n *                        THREE.FrontSide (default), THREE.BackSide, THREE.DoubleSide\n *                  wrap: What type of wrapping to apply for textures\n *                        THREE.RepeatWrapping (default), THREE.ClampToEdgeWrapping, THREE.MirroredRepeatWrapping\n *                  normalizeRGB: RGBs need to be normalized to 0-1 from 0-255\n *                                Default: false, assumed to be already normalized\n *                  ignoreZeroRGBs: Ignore values of RGBs (Ka,Kd,Ks) that are all 0's\n *                                  Default: false\n * @constructor\n */\n\nTHREE.MTLLoader.MaterialCreator = function ( baseUrl, options ) {\n\n\tthis.baseUrl = baseUrl || '';\n\tthis.options = options;\n\tthis.materialsInfo = {};\n\tthis.materials = {};\n\tthis.materialsArray = [];\n\tthis.nameLookup = {};\n\n\tthis.side = ( this.options && this.options.side ) ? this.options.side : THREE.FrontSide;\n\tthis.wrap = ( this.options && this.options.wrap ) ? this.options.wrap : THREE.RepeatWrapping;\n\n};\n\nTHREE.MTLLoader.MaterialCreator.prototype = {\n\n\tconstructor: THREE.MTLLoader.MaterialCreator,\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t},\n\n\tsetManager: function ( value ) {\n\n\t\tthis.manager = value;\n\n\t},\n\n\tsetMaterials: function ( materialsInfo ) {\n\n\t\tthis.materialsInfo = this.convert( materialsInfo );\n\t\tthis.materials = {};\n\t\tthis.materialsArray = [];\n\t\tthis.nameLookup = {};\n\n\t},\n\n\tconvert: function ( materialsInfo ) {\n\n\t\tif ( ! this.options ) return materialsInfo;\n\n\t\tvar converted = {};\n\n\t\tfor ( var mn in materialsInfo ) {\n\n\t\t\t// Convert materials info into normalized form based on options\n\n\t\t\tvar mat = materialsInfo[ mn ];\n\n\t\t\tvar covmat = {};\n\n\t\t\tconverted[ mn ] = covmat;\n\n\t\t\tfor ( var prop in mat ) {\n\n\t\t\t\tvar save = true;\n\t\t\t\tvar value = mat[ prop ];\n\t\t\t\tvar lprop = prop.toLowerCase();\n\n\t\t\t\tswitch ( lprop ) {\n\n\t\t\t\t\tcase 'kd':\n\t\t\t\t\tcase 'ka':\n\t\t\t\t\tcase 'ks':\n\n\t\t\t\t\t\t// Diffuse color (color under white light) using RGB values\n\n\t\t\t\t\t\tif ( this.options && this.options.normalizeRGB ) {\n\n\t\t\t\t\t\t\tvalue = [ value[ 0 ] / 255, value[ 1 ] / 255, value[ 2 ] / 255 ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( this.options && this.options.ignoreZeroRGBs ) {\n\n\t\t\t\t\t\t\tif ( value[ 0 ] === 0 && value[ 1 ] === 0 && value[ 2 ] === 0 ) {\n\n\t\t\t\t\t\t\t\t// ignore\n\n\t\t\t\t\t\t\t\tsave = false;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tif ( save ) {\n\n\t\t\t\t\tcovmat[ lprop ] = value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn converted;\n\n\t},\n\n\tpreload: function () {\n\n\t\tfor ( var mn in this.materialsInfo ) {\n\n\t\t\tthis.create( mn );\n\n\t\t}\n\n\t},\n\n\tgetIndex: function ( materialName ) {\n\n\t\treturn this.nameLookup[ materialName ];\n\n\t},\n\n\tgetAsArray: function () {\n\n\t\tvar index = 0;\n\n\t\tfor ( var mn in this.materialsInfo ) {\n\n\t\t\tthis.materialsArray[ index ] = this.create( mn );\n\t\t\tthis.nameLookup[ mn ] = index;\n\t\t\tindex ++;\n\n\t\t}\n\n\t\treturn this.materialsArray;\n\n\t},\n\n\tcreate: function ( materialName ) {\n\n\t\tif ( this.materials[ materialName ] === undefined ) {\n\n\t\t\tthis.createMaterial_( materialName );\n\n\t\t}\n\n\t\treturn this.materials[ materialName ];\n\n\t},\n\n\tcreateMaterial_: function ( materialName ) {\n\n\t\t// Create material\n\n\t\tvar scope = this;\n\t\tvar mat = this.materialsInfo[ materialName ];\n\t\tvar params = {\n\n\t\t\tname: materialName,\n\t\t\tside: this.side\n\n\t\t};\n\n\t\tfunction resolveURL( baseUrl, url ) {\n\n\t\t\tif ( typeof url !== 'string' || url === '' )\n\t\t\t\treturn '';\n\n\t\t\t// Absolute URL\n\t\t\tif ( /^https?:\\/\\//i.test( url ) ) return url;\n\n\t\t\treturn baseUrl + url;\n\n\t\t}\n\n\t\tfunction setMapForType( mapType, value ) {\n\n\t\t\tif ( params[ mapType ] ) return; // Keep the first encountered texture\n\n\t\t\tvar texParams = scope.getTextureParams( value, params );\n\t\t\tvar map = scope.loadTexture( resolveURL( scope.baseUrl, texParams.url ) );\n\n\t\t\tmap.repeat.copy( texParams.scale );\n\t\t\tmap.offset.copy( texParams.offset );\n\n\t\t\tmap.wrapS = scope.wrap;\n\t\t\tmap.wrapT = scope.wrap;\n\n\t\t\tparams[ mapType ] = map;\n\n\t\t}\n\n\t\tfor ( var prop in mat ) {\n\n\t\t\tvar value = mat[ prop ];\n\n\t\t\tif ( value === '' ) continue;\n\n\t\t\tswitch ( prop.toLowerCase() ) {\n\n\t\t\t\t// Ns is material specular exponent\n\n\t\t\t\tcase 'kd':\n\n\t\t\t\t\t// Diffuse color (color under white light) using RGB values\n\n\t\t\t\t\tparams.color = new THREE.Color().fromArray( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ks':\n\n\t\t\t\t\t// Specular color (color when light is reflected from shiny surface) using RGB values\n\t\t\t\t\tparams.specular = new THREE.Color().fromArray( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_kd':\n\n\t\t\t\t\t// Diffuse texture map\n\n\t\t\t\t\tsetMapForType( \"map\", value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_ks':\n\n\t\t\t\t\t// Specular map\n\n\t\t\t\t\tsetMapForType( \"specularMap\", value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map_bump':\n\t\t\t\tcase 'bump':\n\n\t\t\t\t\t// Bump texture map\n\n\t\t\t\t\tsetMapForType( \"bumpMap\", value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ns':\n\n\t\t\t\t\t// The specular exponent (defines the focus of the specular highlight)\n\t\t\t\t\t// A high exponent results in a tight, concentrated highlight. Ns values normally range from 0 to 1000.\n\n\t\t\t\t\tparams.shininess = parseFloat( value );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'd':\n\n\t\t\t\t\tif ( value < 1 ) {\n\n\t\t\t\t\t\tparams.opacity = value;\n\t\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Tr':\n\n\t\t\t\t\tif ( value > 0 ) {\n\n\t\t\t\t\t\tparams.opacity = 1 - value;\n\t\t\t\t\t\tparams.transparent = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.materials[ materialName ] = new THREE.MeshPhongMaterial( params );\n\t\treturn this.materials[ materialName ];\n\n\t},\n\n\tgetTextureParams: function ( value, matParams ) {\n\n\t\tvar texParams = {\n\n\t\t\tscale: new THREE.Vector2( 1, 1 ),\n\t\t\toffset: new THREE.Vector2( 0, 0 )\n\n\t\t };\n\n\t\tvar items = value.split( /\\s+/ );\n\t\tvar pos;\n\n\t\tpos = items.indexOf( '-bm' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\tmatParams.bumpScale = parseFloat( items[ pos + 1 ] );\n\t\t\titems.splice( pos, 2 );\n\n\t\t}\n\n\t\tpos = items.indexOf( '-s' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\ttexParams.scale.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\n\n\t\t}\n\n\t\tpos = items.indexOf( '-o' );\n\n\t\tif ( pos >= 0 ) {\n\n\t\t\ttexParams.offset.set( parseFloat( items[ pos + 1 ] ), parseFloat( items[ pos + 2 ] ) );\n\t\t\titems.splice( pos, 4 ); // we expect 3 parameters here!\n\n\t\t}\n\n\t\ttexParams.url = items.join( ' ' ).trim();\n\t\treturn texParams;\n\n\t},\n\n\tloadTexture: function ( url, mapping, onLoad, onProgress, onError ) {\n\n\t\tvar texture;\n\t\tvar loader = THREE.Loader.Handlers.get( url );\n\t\tvar manager = ( this.manager !== undefined ) ? this.manager : THREE.DefaultLoadingManager;\n\n\t\tif ( loader === null ) {\n\n\t\t\tloader = new THREE.TextureLoader( manager );\n\n\t\t}\n\n\t\tif ( loader.setCrossOrigin ) loader.setCrossOrigin( this.crossOrigin );\n\t\ttexture = loader.load( url, onLoad, onProgress, onError );\n\n\t\tif ( mapping !== undefined ) texture.mapping = mapping;\n\n\t\treturn texture;\n\n\t}\n\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/three/examples/js/loaders/MTLLoader.js\n// module id = 682\n// module chunks = 6","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.OBJLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n\tthis.materials = null;\n\n\tthis.regexp = {\n\t\t// v float float float\n\t\tvertex_pattern           : /^v\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\t\t// vn float float float\n\t\tnormal_pattern           : /^vn\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\t\t// vt float float\n\t\tuv_pattern               : /^vt\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\t\t// f vertex vertex vertex\n\t\tface_vertex              : /^f\\s+(-?\\d+)\\s+(-?\\d+)\\s+(-?\\d+)(?:\\s+(-?\\d+))?/,\n\t\t// f vertex/uv vertex/uv vertex/uv\n\t\tface_vertex_uv           : /^f\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+))?/,\n\t\t// f vertex/uv/normal vertex/uv/normal vertex/uv/normal\n\t\tface_vertex_uv_normal    : /^f\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+))?/,\n\t\t// f vertex//normal vertex//normal vertex//normal\n\t\tface_vertex_normal       : /^f\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)(?:\\s+(-?\\d+)\\/\\/(-?\\d+))?/,\n\t\t// o object_name | g group_name\n\t\tobject_pattern           : /^[og]\\s*(.+)?/,\n\t\t// s boolean\n\t\tsmoothing_pattern        : /^s\\s+(\\d+|on|off)/,\n\t\t// mtllib file_reference\n\t\tmaterial_library_pattern : /^mtllib /,\n\t\t// usemtl material_name\n\t\tmaterial_use_pattern     : /^usemtl /\n\t};\n\n};\n\nTHREE.OBJLoader.prototype = {\n\n\tconstructor: THREE.OBJLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.FileLoader( scope.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( text ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\n\t},\n\n\tsetMaterials: function ( materials ) {\n\n\t\tthis.materials = materials;\n\n\t},\n\n\t_createParserState : function () {\n\n\t\tvar state = {\n\t\t\tobjects  : [],\n\t\t\tobject   : {},\n\n\t\t\tvertices : [],\n\t\t\tnormals  : [],\n\t\t\tuvs      : [],\n\n\t\t\tmaterialLibraries : [],\n\n\t\t\tstartObject: function ( name, fromDeclaration ) {\n\n\t\t\t\t// If the current object (initial from reset) is not from a g/o declaration in the parsed\n\t\t\t\t// file. We need to use it for the first parsed g/o to keep things in sync.\n\t\t\t\tif ( this.object && this.object.fromDeclaration === false ) {\n\n\t\t\t\t\tthis.object.name = name;\n\t\t\t\t\tthis.object.fromDeclaration = ( fromDeclaration !== false );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tvar previousMaterial = ( this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined );\n\n\t\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\t\tthis.object._finalize( true );\n\n\t\t\t\t}\n\n\t\t\t\tthis.object = {\n\t\t\t\t\tname : name || '',\n\t\t\t\t\tfromDeclaration : ( fromDeclaration !== false ),\n\n\t\t\t\t\tgeometry : {\n\t\t\t\t\t\tvertices : [],\n\t\t\t\t\t\tnormals  : [],\n\t\t\t\t\t\tuvs      : []\n\t\t\t\t\t},\n\t\t\t\t\tmaterials : [],\n\t\t\t\t\tsmooth : true,\n\n\t\t\t\t\tstartMaterial : function( name, libraries ) {\n\n\t\t\t\t\t\tvar previous = this._finalize( false );\n\n\t\t\t\t\t\t// New usemtl declaration overwrites an inherited material, except if faces were declared\n\t\t\t\t\t\t// after the material, then it must be preserved for proper MultiMaterial continuation.\n\t\t\t\t\t\tif ( previous && ( previous.inherited || previous.groupCount <= 0 ) ) {\n\n\t\t\t\t\t\t\tthis.materials.splice( previous.index, 1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar material = {\n\t\t\t\t\t\t\tindex      : this.materials.length,\n\t\t\t\t\t\t\tname       : name || '',\n\t\t\t\t\t\t\tmtllib     : ( Array.isArray( libraries ) && libraries.length > 0 ? libraries[ libraries.length - 1 ] : '' ),\n\t\t\t\t\t\t\tsmooth     : ( previous !== undefined ? previous.smooth : this.smooth ),\n\t\t\t\t\t\t\tgroupStart : ( previous !== undefined ? previous.groupEnd : 0 ),\n\t\t\t\t\t\t\tgroupEnd   : -1,\n\t\t\t\t\t\t\tgroupCount : -1,\n\t\t\t\t\t\t\tinherited  : false,\n\n\t\t\t\t\t\t\tclone : function( index ) {\n\t\t\t\t\t\t\t\tvar cloned = {\n\t\t\t\t\t\t\t\t\tindex      : ( typeof index === 'number' ? index : this.index ),\n\t\t\t\t\t\t\t\t\tname       : this.name,\n\t\t\t\t\t\t\t\t\tmtllib     : this.mtllib,\n\t\t\t\t\t\t\t\t\tsmooth     : this.smooth,\n\t\t\t\t\t\t\t\t\tgroupStart : 0,\n\t\t\t\t\t\t\t\t\tgroupEnd   : -1,\n\t\t\t\t\t\t\t\t\tgroupCount : -1,\n\t\t\t\t\t\t\t\t\tinherited  : false\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tcloned.clone = this.clone.bind(cloned);\n\t\t\t\t\t\t\t\treturn cloned;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tthis.materials.push( material );\n\n\t\t\t\t\t\treturn material;\n\n\t\t\t\t\t},\n\n\t\t\t\t\tcurrentMaterial : function() {\n\n\t\t\t\t\t\tif ( this.materials.length > 0 ) {\n\t\t\t\t\t\t\treturn this.materials[ this.materials.length - 1 ];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn undefined;\n\n\t\t\t\t\t},\n\n\t\t\t\t\t_finalize : function( end ) {\n\n\t\t\t\t\t\tvar lastMultiMaterial = this.currentMaterial();\n\t\t\t\t\t\tif ( lastMultiMaterial && lastMultiMaterial.groupEnd === -1 ) {\n\n\t\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n\t\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n\t\t\t\t\t\t\tlastMultiMaterial.inherited = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Ignore objects tail materials if no face declarations followed them before a new o/g started.\n\t\t\t\t\t\tif ( end && this.materials.length > 1 ) {\n\n\t\t\t\t\t\t\tfor ( var mi = this.materials.length - 1; mi >= 0; mi-- ) {\n\t\t\t\t\t\t\t\tif ( this.materials[mi].groupCount <= 0 ) {\n\t\t\t\t\t\t\t\t\tthis.materials.splice( mi, 1 );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Guarantee at least one empty material, this makes the creation later more straight forward.\n\t\t\t\t\t\tif ( end && this.materials.length === 0 ) {\n\n\t\t\t\t\t\t\tthis.materials.push({\n\t\t\t\t\t\t\t\tname   : '',\n\t\t\t\t\t\t\t\tsmooth : this.smooth\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn lastMultiMaterial;\n\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// Inherit previous objects material.\n\t\t\t\t// Spec tells us that a declared material must be set to all objects until a new material is declared.\n\t\t\t\t// If a usemtl declaration is encountered while this new object is being parsed, it will\n\t\t\t\t// overwrite the inherited material. Exception being that there was already face declarations\n\t\t\t\t// to the inherited material, then it will be preserved for proper MultiMaterial continuation.\n\n\t\t\t\tif ( previousMaterial && previousMaterial.name && typeof previousMaterial.clone === \"function\" ) {\n\n\t\t\t\t\tvar declared = previousMaterial.clone( 0 );\n\t\t\t\t\tdeclared.inherited = true;\n\t\t\t\t\tthis.object.materials.push( declared );\n\n\t\t\t\t}\n\n\t\t\t\tthis.objects.push( this.object );\n\n\t\t\t},\n\n\t\t\tfinalize : function() {\n\n\t\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\t\tthis.object._finalize( true );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tparseVertexIndex: function ( value, len ) {\n\n\t\t\t\tvar index = parseInt( value, 10 );\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t\t},\n\n\t\t\tparseNormalIndex: function ( value, len ) {\n\n\t\t\t\tvar index = parseInt( value, 10 );\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t\t},\n\n\t\t\tparseUVIndex: function ( value, len ) {\n\n\t\t\t\tvar index = parseInt( value, 10 );\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 2 ) * 2;\n\n\t\t\t},\n\n\t\t\taddVertex: function ( a, b, c ) {\n\n\t\t\t\tvar src = this.vertices;\n\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\tdst.push( src[ a + 0 ] );\n\t\t\t\tdst.push( src[ a + 1 ] );\n\t\t\t\tdst.push( src[ a + 2 ] );\n\t\t\t\tdst.push( src[ b + 0 ] );\n\t\t\t\tdst.push( src[ b + 1 ] );\n\t\t\t\tdst.push( src[ b + 2 ] );\n\t\t\t\tdst.push( src[ c + 0 ] );\n\t\t\t\tdst.push( src[ c + 1 ] );\n\t\t\t\tdst.push( src[ c + 2 ] );\n\n\t\t\t},\n\n\t\t\taddVertexLine: function ( a ) {\n\n\t\t\t\tvar src = this.vertices;\n\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\tdst.push( src[ a + 0 ] );\n\t\t\t\tdst.push( src[ a + 1 ] );\n\t\t\t\tdst.push( src[ a + 2 ] );\n\n\t\t\t},\n\n\t\t\taddNormal : function ( a, b, c ) {\n\n\t\t\t\tvar src = this.normals;\n\t\t\t\tvar dst = this.object.geometry.normals;\n\n\t\t\t\tdst.push( src[ a + 0 ] );\n\t\t\t\tdst.push( src[ a + 1 ] );\n\t\t\t\tdst.push( src[ a + 2 ] );\n\t\t\t\tdst.push( src[ b + 0 ] );\n\t\t\t\tdst.push( src[ b + 1 ] );\n\t\t\t\tdst.push( src[ b + 2 ] );\n\t\t\t\tdst.push( src[ c + 0 ] );\n\t\t\t\tdst.push( src[ c + 1 ] );\n\t\t\t\tdst.push( src[ c + 2 ] );\n\n\t\t\t},\n\n\t\t\taddUV: function ( a, b, c ) {\n\n\t\t\t\tvar src = this.uvs;\n\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\tdst.push( src[ a + 0 ] );\n\t\t\t\tdst.push( src[ a + 1 ] );\n\t\t\t\tdst.push( src[ b + 0 ] );\n\t\t\t\tdst.push( src[ b + 1 ] );\n\t\t\t\tdst.push( src[ c + 0 ] );\n\t\t\t\tdst.push( src[ c + 1 ] );\n\n\t\t\t},\n\n\t\t\taddUVLine: function ( a ) {\n\n\t\t\t\tvar src = this.uvs;\n\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\tdst.push( src[ a + 0 ] );\n\t\t\t\tdst.push( src[ a + 1 ] );\n\n\t\t\t},\n\n\t\t\taddFace: function ( a, b, c, d, ua, ub, uc, ud, na, nb, nc, nd ) {\n\n\t\t\t\tvar vLen = this.vertices.length;\n\n\t\t\t\tvar ia = this.parseVertexIndex( a, vLen );\n\t\t\t\tvar ib = this.parseVertexIndex( b, vLen );\n\t\t\t\tvar ic = this.parseVertexIndex( c, vLen );\n\t\t\t\tvar id;\n\n\t\t\t\tif ( d === undefined ) {\n\n\t\t\t\t\tthis.addVertex( ia, ib, ic );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tid = this.parseVertexIndex( d, vLen );\n\n\t\t\t\t\tthis.addVertex( ia, ib, id );\n\t\t\t\t\tthis.addVertex( ib, ic, id );\n\n\t\t\t\t}\n\n\t\t\t\tif ( ua !== undefined ) {\n\n\t\t\t\t\tvar uvLen = this.uvs.length;\n\n\t\t\t\t\tia = this.parseUVIndex( ua, uvLen );\n\t\t\t\t\tib = this.parseUVIndex( ub, uvLen );\n\t\t\t\t\tic = this.parseUVIndex( uc, uvLen );\n\n\t\t\t\t\tif ( d === undefined ) {\n\n\t\t\t\t\t\tthis.addUV( ia, ib, ic );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tid = this.parseUVIndex( ud, uvLen );\n\n\t\t\t\t\t\tthis.addUV( ia, ib, id );\n\t\t\t\t\t\tthis.addUV( ib, ic, id );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( na !== undefined ) {\n\n\t\t\t\t\t// Normals are many times the same. If so, skip function call and parseInt.\n\t\t\t\t\tvar nLen = this.normals.length;\n\t\t\t\t\tia = this.parseNormalIndex( na, nLen );\n\n\t\t\t\t\tib = na === nb ? ia : this.parseNormalIndex( nb, nLen );\n\t\t\t\t\tic = na === nc ? ia : this.parseNormalIndex( nc, nLen );\n\n\t\t\t\t\tif ( d === undefined ) {\n\n\t\t\t\t\t\tthis.addNormal( ia, ib, ic );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tid = this.parseNormalIndex( nd, nLen );\n\n\t\t\t\t\t\tthis.addNormal( ia, ib, id );\n\t\t\t\t\t\tthis.addNormal( ib, ic, id );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\taddLineGeometry: function ( vertices, uvs ) {\n\n\t\t\t\tthis.object.geometry.type = 'Line';\n\n\t\t\t\tvar vLen = this.vertices.length;\n\t\t\t\tvar uvLen = this.uvs.length;\n\n\t\t\t\tfor ( var vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n\t\t\t\t\tthis.addVertexLine( this.parseVertexIndex( vertices[ vi ], vLen ) );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var uvi = 0, l = uvs.length; uvi < l; uvi ++ ) {\n\n\t\t\t\t\tthis.addUVLine( this.parseUVIndex( uvs[ uvi ], uvLen ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tstate.startObject( '', false );\n\n\t\treturn state;\n\n\t},\n\n\tparse: function ( text ) {\n\n\t\tconsole.time( 'OBJLoader' );\n\n\t\tvar state = this._createParserState();\n\n\t\tif ( text.indexOf( '\\r\\n' ) !== - 1 ) {\n\n\t\t\t// This is faster than String.split with regex that splits on both\n\t\t\ttext = text.replace( /\\r\\n/g, '\\n' );\n\n\t\t}\n\n\t\tif ( text.indexOf( '\\\\\\n' ) !== - 1) {\n\n\t\t\t// join lines separated by a line continuation character (\\)\n\t\t\ttext = text.replace( /\\\\\\n/g, '' );\n\n\t\t}\n\n\t\tvar lines = text.split( '\\n' );\n\t\tvar line = '', lineFirstChar = '', lineSecondChar = '';\n\t\tvar lineLength = 0;\n\t\tvar result = [];\n\n\t\t// Faster to just trim left side of the line. Use if available.\n\t\tvar trimLeft = ( typeof ''.trimLeft === 'function' );\n\n\t\tfor ( var i = 0, l = lines.length; i < l; i ++ ) {\n\n\t\t\tline = lines[ i ];\n\n\t\t\tline = trimLeft ? line.trimLeft() : line.trim();\n\n\t\t\tlineLength = line.length;\n\n\t\t\tif ( lineLength === 0 ) continue;\n\n\t\t\tlineFirstChar = line.charAt( 0 );\n\n\t\t\t// @todo invoke passed in handler if any\n\t\t\tif ( lineFirstChar === '#' ) continue;\n\n\t\t\tif ( lineFirstChar === 'v' ) {\n\n\t\t\t\tlineSecondChar = line.charAt( 1 );\n\n\t\t\t\tif ( lineSecondChar === ' ' && ( result = this.regexp.vertex_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// 0                  1      2      3\n\t\t\t\t\t// [\"v 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\n\n\t\t\t\t\tstate.vertices.push(\n\t\t\t\t\t\tparseFloat( result[ 1 ] ),\n\t\t\t\t\t\tparseFloat( result[ 2 ] ),\n\t\t\t\t\t\tparseFloat( result[ 3 ] )\n\t\t\t\t\t);\n\n\t\t\t\t} else if ( lineSecondChar === 'n' && ( result = this.regexp.normal_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// 0                   1      2      3\n\t\t\t\t\t// [\"vn 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\n\n\t\t\t\t\tstate.normals.push(\n\t\t\t\t\t\tparseFloat( result[ 1 ] ),\n\t\t\t\t\t\tparseFloat( result[ 2 ] ),\n\t\t\t\t\t\tparseFloat( result[ 3 ] )\n\t\t\t\t\t);\n\n\t\t\t\t} else if ( lineSecondChar === 't' && ( result = this.regexp.uv_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// 0               1      2\n\t\t\t\t\t// [\"vt 0.1 0.2\", \"0.1\", \"0.2\"]\n\n\t\t\t\t\tstate.uvs.push(\n\t\t\t\t\t\tparseFloat( result[ 1 ] ),\n\t\t\t\t\t\tparseFloat( result[ 2 ] )\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( \"Unexpected vertex/normal/uv line: '\" + line  + \"'\" );\n\n\t\t\t\t}\n\n\t\t\t} else if ( lineFirstChar === \"f\" ) {\n\n\t\t\t\tif ( ( result = this.regexp.face_vertex_uv_normal.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// f vertex/uv/normal vertex/uv/normal vertex/uv/normal\n\t\t\t\t\t// 0                        1    2    3    4    5    6    7    8    9   10         11         12\n\t\t\t\t\t// [\"f 1/1/1 2/2/2 3/3/3\", \"1\", \"1\", \"1\", \"2\", \"2\", \"2\", \"3\", \"3\", \"3\", undefined, undefined, undefined]\n\n\t\t\t\t\tstate.addFace(\n\t\t\t\t\t\tresult[ 1 ], result[ 4 ], result[ 7 ], result[ 10 ],\n\t\t\t\t\t\tresult[ 2 ], result[ 5 ], result[ 8 ], result[ 11 ],\n\t\t\t\t\t\tresult[ 3 ], result[ 6 ], result[ 9 ], result[ 12 ]\n\t\t\t\t\t);\n\n\t\t\t\t} else if ( ( result = this.regexp.face_vertex_uv.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// f vertex/uv vertex/uv vertex/uv\n\t\t\t\t\t// 0                  1    2    3    4    5    6   7          8\n\t\t\t\t\t// [\"f 1/1 2/2 3/3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\n\n\t\t\t\t\tstate.addFace(\n\t\t\t\t\t\tresult[ 1 ], result[ 3 ], result[ 5 ], result[ 7 ],\n\t\t\t\t\t\tresult[ 2 ], result[ 4 ], result[ 6 ], result[ 8 ]\n\t\t\t\t\t);\n\n\t\t\t\t} else if ( ( result = this.regexp.face_vertex_normal.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// f vertex//normal vertex//normal vertex//normal\n\t\t\t\t\t// 0                     1    2    3    4    5    6   7          8\n\t\t\t\t\t// [\"f 1//1 2//2 3//3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\n\n\t\t\t\t\tstate.addFace(\n\t\t\t\t\t\tresult[ 1 ], result[ 3 ], result[ 5 ], result[ 7 ],\n\t\t\t\t\t\tundefined, undefined, undefined, undefined,\n\t\t\t\t\t\tresult[ 2 ], result[ 4 ], result[ 6 ], result[ 8 ]\n\t\t\t\t\t);\n\n\t\t\t\t} else if ( ( result = this.regexp.face_vertex.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// f vertex vertex vertex\n\t\t\t\t\t// 0            1    2    3   4\n\t\t\t\t\t// [\"f 1 2 3\", \"1\", \"2\", \"3\", undefined]\n\n\t\t\t\t\tstate.addFace(\n\t\t\t\t\t\tresult[ 1 ], result[ 2 ], result[ 3 ], result[ 4 ]\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( \"Unexpected face line: '\" + line  + \"'\" );\n\n\t\t\t\t}\n\n\t\t\t} else if ( lineFirstChar === \"l\" ) {\n\n\t\t\t\tvar lineParts = line.substring( 1 ).trim().split( \" \" );\n\t\t\t\tvar lineVertices = [], lineUVs = [];\n\n\t\t\t\tif ( line.indexOf( \"/\" ) === - 1 ) {\n\n\t\t\t\t\tlineVertices = lineParts;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var li = 0, llen = lineParts.length; li < llen; li ++ ) {\n\n\t\t\t\t\t\tvar parts = lineParts[ li ].split( \"/\" );\n\n\t\t\t\t\t\tif ( parts[ 0 ] !== \"\" ) lineVertices.push( parts[ 0 ] );\n\t\t\t\t\t\tif ( parts[ 1 ] !== \"\" ) lineUVs.push( parts[ 1 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\tstate.addLineGeometry( lineVertices, lineUVs );\n\n\t\t\t} else if ( ( result = this.regexp.object_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t// o object_name\n\t\t\t\t// or\n\t\t\t\t// g group_name\n\n\t\t\t\t// WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\n\t\t\t\t// var name = result[ 0 ].substr( 1 ).trim();\n\t\t\t\tvar name = ( \" \" + result[ 0 ].substr( 1 ).trim() ).substr( 1 );\n\n\t\t\t\tstate.startObject( name );\n\n\t\t\t} else if ( this.regexp.material_use_pattern.test( line ) ) {\n\n\t\t\t\t// material\n\n\t\t\t\tstate.object.startMaterial( line.substring( 7 ).trim(), state.materialLibraries );\n\n\t\t\t} else if ( this.regexp.material_library_pattern.test( line ) ) {\n\n\t\t\t\t// mtl file\n\n\t\t\t\tstate.materialLibraries.push( line.substring( 7 ).trim() );\n\n\t\t\t} else if ( ( result = this.regexp.smoothing_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t// smooth shading\n\n\t\t\t\t// @todo Handle files that have varying smooth values for a set of faces inside one geometry,\n\t\t\t\t// but does not define a usemtl for each face set.\n\t\t\t\t// This should be detected and a dummy material created (later MultiMaterial and geometry groups).\n\t\t\t\t// This requires some care to not create extra material on each smooth value for \"normal\" obj files.\n\t\t\t\t// where explicit usemtl defines geometry groups.\n\t\t\t\t// Example asset: examples/models/obj/cerberus/Cerberus.obj\n\n\t\t\t\tvar value = result[ 1 ].trim().toLowerCase();\n\t\t\t\tstate.object.smooth = ( value === '1' || value === 'on' );\n\n\t\t\t\tvar material = state.object.currentMaterial();\n\t\t\t\tif ( material ) {\n\n\t\t\t\t\tmaterial.smooth = state.object.smooth;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Handle null terminated files without exception\n\t\t\t\tif ( line === '\\0' ) continue;\n\n\t\t\t\tthrow new Error( \"Unexpected line: '\" + line  + \"'\" );\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.finalize();\n\n\t\tvar container = new THREE.Group();\n\t\tcontainer.materialLibraries = [].concat( state.materialLibraries );\n\n\t\tfor ( var i = 0, l = state.objects.length; i < l; i ++ ) {\n\n\t\t\tvar object = state.objects[ i ];\n\t\t\tvar geometry = object.geometry;\n\t\t\tvar materials = object.materials;\n\t\t\tvar isLine = ( geometry.type === 'Line' );\n\n\t\t\t// Skip o/g line declarations that did not follow with any faces\n\t\t\tif ( geometry.vertices.length === 0 ) continue;\n\n\t\t\tvar buffergeometry = new THREE.BufferGeometry();\n\n\t\t\tbuffergeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( geometry.vertices ), 3 ) );\n\n\t\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\t\tbuffergeometry.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( geometry.normals ), 3 ) );\n\n\t\t\t} else {\n\n\t\t\t\tbuffergeometry.computeVertexNormals();\n\n\t\t\t}\n\n\t\t\tif ( geometry.uvs.length > 0 ) {\n\n\t\t\t\tbuffergeometry.addAttribute( 'uv', new THREE.BufferAttribute( new Float32Array( geometry.uvs ), 2 ) );\n\n\t\t\t}\n\n\t\t\t// Create materials\n\n\t\t\tvar createdMaterials = [];\n\n\t\t\tfor ( var mi = 0, miLen = materials.length; mi < miLen ; mi++ ) {\n\n\t\t\t\tvar sourceMaterial = materials[mi];\n\t\t\t\tvar material = undefined;\n\n\t\t\t\tif ( this.materials !== null ) {\n\n\t\t\t\t\tmaterial = this.materials.create( sourceMaterial.name );\n\n\t\t\t\t\t// mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\n\t\t\t\t\tif ( isLine && material && ! ( material instanceof THREE.LineBasicMaterial ) ) {\n\n\t\t\t\t\t\tvar materialLine = new THREE.LineBasicMaterial();\n\t\t\t\t\t\tmaterialLine.copy( material );\n\t\t\t\t\t\tmaterial = materialLine;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! material ) {\n\n\t\t\t\t\tmaterial = ( ! isLine ? new THREE.MeshPhongMaterial() : new THREE.LineBasicMaterial() );\n\t\t\t\t\tmaterial.name = sourceMaterial.name;\n\n\t\t\t\t}\n\n\t\t\t\tmaterial.shading = sourceMaterial.smooth ? THREE.SmoothShading : THREE.FlatShading;\n\n\t\t\t\tcreatedMaterials.push(material);\n\n\t\t\t}\n\n\t\t\t// Create mesh\n\n\t\t\tvar mesh;\n\n\t\t\tif ( createdMaterials.length > 1 ) {\n\n\t\t\t\tfor ( var mi = 0, miLen = materials.length; mi < miLen ; mi++ ) {\n\n\t\t\t\t\tvar sourceMaterial = materials[mi];\n\t\t\t\t\tbuffergeometry.addGroup( sourceMaterial.groupStart, sourceMaterial.groupCount, mi );\n\n\t\t\t\t}\n\n\t\t\t\tvar multiMaterial = new THREE.MultiMaterial( createdMaterials );\n\t\t\t\tmesh = ( ! isLine ? new THREE.Mesh( buffergeometry, multiMaterial ) : new THREE.LineSegments( buffergeometry, multiMaterial ) );\n\n\t\t\t} else {\n\n\t\t\t\tmesh = ( ! isLine ? new THREE.Mesh( buffergeometry, createdMaterials[ 0 ] ) : new THREE.LineSegments( buffergeometry, createdMaterials[ 0 ] ) );\n\t\t\t}\n\n\t\t\tmesh.name = object.name;\n\n\t\t\tcontainer.add( mesh );\n\n\t\t}\n\n\t\tconsole.timeEnd( 'OBJLoader' );\n\n\t\treturn container;\n\n\t}\n\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/three/examples/js/loaders/OBJLoader.js\n// module id = 683\n// module chunks = 6","'use strict';\nvar assign = require('lodash.assign');\n\nvar ScreenLayerView = require('./../view');\nmodule.exports = ScreenLayerView.types.canvas = ScreenLayerView.extend({\n  template: function() {\n    return '<canvas id=\"' + this.model.getId() + '\" view-id=\"' + this.cid + '\"></canvas>';\n  },\n\n  derived: {\n    offCanvas: {\n      deps: ['width', 'height', 'el'],\n      fn: function() {\n        var canvas = document.createElement('canvas');\n        canvas.width = this.width;\n        canvas.height = this.height;\n        return canvas;\n      }\n    },\n    ctx: {\n      deps: ['offCanvas'],\n      fn: function() {\n        return this.offCanvas.getContext('2d');\n      }\n    },\n    destCtx: {\n      deps: ['el', 'width', 'height'],\n      fn: function() {\n        return this.el.getContext('2d');\n      }\n    }\n  },\n\n  session: {\n    frames: ['number', true, 0]\n  },\n\n  update: function() {\n    ScreenLayerView.prototype.update.apply(this, arguments);\n    this.model.frametime = this.parent.model.frametime;\n    if (!this.parent || !this.parent.el) return;\n\n    var cw = this.width = this.parent.el.clientWidth;\n    var ch = this.height = this.parent.el.clientHeight;\n    var ctx = this.ctx;\n    ctx.clearRect(0, 0, cw, ch);\n    if (!this.model.active) { return this; }\n\n    this.model.canvasLayers.filter(function (layer) {\n      return layer.active;\n    }).forEach(function(layer) {\n      layer.draw(ctx);\n    });\n\n    this.frames++;\n    if (this.model.clear && this.frames >= this.model.clear) {\n      this.destCtx.clearRect(0, 0, cw, ch);\n      this.frames = 0;\n    }\n\n    this.destCtx.drawImage(this.offCanvas, 0, 0, cw, ch, 0, 0, cw, ch);\n\n    return this;\n  },\n\n\n  bindings: assign({\n    width: {\n      name: 'width',\n      type: 'attribute'\n    },\n    height: {\n      name: 'height',\n      type: 'attribute'\n    }\n  }, ScreenLayerView.prototype.bindings)\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/canvas/view.js\n// module id = 696\n// module chunks = 6","'use strict';\nvar ScreenLayerView = require('./../view');\nvar _cacheImgs = {};\nfunction loadImg(url, viewId, done) {\n  if (_cacheImgs[url]) {\n    return done(null, _cacheImgs[url]);\n  }\n\n  var img = new Image();\n  _cacheImgs[viewId+url] = img;\n  img.onload = function() {\n    done(null, img);\n  };\n  img.onerror = function() {};\n  img.src = url;\n  return done(null, _cacheImgs[viewId+url]);\n}\n\nmodule.exports = ScreenLayerView.types.img = ScreenLayerView.extend({\n  template: function() {\n    return '<canvas class=\"layer-image\" id=\"' + this.model.getId() + '\" view-id=\"' + this.cid + '\"></canvas>';\n  },\n\n  initialize: function() {\n    var view = this;\n    ScreenLayerView.prototype.initialize.apply(view, arguments);\n\n\n    function load() {\n      var src = view.model.src;\n      if (!src) return view.clearImage();\n      loadImg(src, view.getId(), function(err, img) {\n        view.drawImage(img);\n      });\n    }\n\n    view.on('change:width change:height', load);\n    view.model.on('change:src', load);\n    load();\n  },\n\n  derived: {\n    ctx: {\n      deps: ['el'],\n      fn: function() {\n        if (!this.el) return;\n        return this.el.getContext('2d');\n      }\n    }\n  },\n\n  _resizeCanvas: function() {\n    if (!this.el || !this.el.parentNode) return this;\n    var cnv = this.el;\n    var dw = cnv.parentNode.clientWidth;\n    var dh = cnv.parentNode.clientHeight;\n    if (cnv.width != dw) cnv.width = dw;\n    if (cnv.height != dh) cnv.height = dh;\n    return this;\n  },\n\n  clearImage: function() {\n    var ctx = this.ctx;\n    if (!ctx) return this;\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    return this;\n  },\n\n  drawImage: function(img) {\n    var ctx = this._resizeCanvas().clearImage().ctx;\n    if (!ctx) return this;\n    ctx.drawImage(img, 0, 0, ctx.canvas.width, ctx.canvas.height);\n    return this;\n  }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/img/view.js\n// module id = 699\n// module chunks = 6","'use strict';\nvar ScreenLayerView = require('./../view');\n\nmodule.exports = ScreenLayerView.types.SVG = ScreenLayerView.extend({\n  autoRender: true,\n\n  template: function() {\n    return '<div class=\"layer-svg\" id=\"' + this.model.getId() + '\" view-id=\"' + this.cid + '\"></div>';\n  },\n\n  derived: {\n    svg: {\n      deps: ['el', 'model.content'],\n      fn: function() {\n        return this.el && this.model.content ? this.query('svg') || false : false;\n      }\n    },\n    styleEl: {\n      deps: ['model.content'],\n      fn: function() {\n        var id = this.model.getId();\n        var el = document.getElementById('style-' + id);\n        if (!el) {\n          el = document.createElement('style');\n          el.id = 'style-' + id;\n          el.appendChild(document.createTextNode(''));\n          document.head.appendChild(el);\n        }\n        return el;\n      }\n    },\n  },\n\n  updateStyles: function() {\n    if (!this.model.active || !this.el) return this;\n    var selectors = Object.keys(this.model.svgStyles);\n    selectors.forEach(function(selector) {\n      this.addRule('>svg ' + selector, this.model.svgStyles[selector]);\n    }, this);\n    return this;\n  },\n\n  updateProperties: function() {\n    if (!this.model.active || !this.el) return this;\n    this.model.styleProperties.forEach(function(styleProp) {\n      this.setProperty(styleProp.name, styleProp.value);\n    }, this);\n    return this;\n  },\n\n  updateContent: function() {\n    if (!this.el || this.el.innerHTML === this.model.content) return this;\n\n    this.el.innerHTML = this.model.content;\n    this.updateStyles().updateProperties();\n  },\n\n  initialize: function() {\n    ScreenLayerView.prototype.initialize.apply(this, arguments);\n    this.updateContent().updateStyles().updateProperties();\n\n    this.listenTo(this.model, 'change:content', this.updateContent);\n    this.on('change:el', this.updateContent);\n\n    this.listenToAndRun(this.model, 'change:svgStyles', this.updateStyles);\n    this.listenToAndRun(this.model.styleProperties, 'add remove change', this.updateProperties);\n  },\n\n  addRule: function(selector, properties) {\n    ScreenLayerView.prototype.addRule.call(this, selector, properties);\n    return this;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/svg/view.js\n// module id = 703\n// module chunks = 6","'use strict';\nvar assign = require('lodash.assign');\nvar LayerView = require('./../view');\nvar TxtLayerView = LayerView.types.txt = LayerView.extend({\n  autoRender: true,\n\n  template: function() {\n    return '<div class=\"layer-txt\" id=\"' + this.model.getId() + '\" view-id=\"' + this.cid + '\"><div class=\"text\"></div></div>';\n  },\n\n  bindings: assign(LayerView.prototype.bindings, {\n    'model.text': '.text'\n  })\n});\nmodule.exports = TxtLayerView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/txt/view.js\n// module id = 707\n// module chunks = 6","'use strict';\n\nvar ScreenLayerView = require('./../view');\nmodule.exports = ScreenLayerView.types.video = ScreenLayerView.extend({\n  template: function() {\n    return '<video id=\"' + this.model.cid + '\" view-id=\"' + this.cid + '\" autoplay loop muted></video>';\n  },\n\n  bindings: require('lodash.assign')({\n    'model.src': {\n      type: 'attribute',\n      name: 'src'\n    }\n  }, ScreenLayerView.prototype.bindings)\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/video/view.js\n// module id = 709\n// module chunks = 6"],"sourceRoot":""}