webpackJsonp([1],[function(e,t,n){"use strict";var r=VFDeps.State,i=VFDeps.Collection,a=n(11);n(16),n(19),n(18),n(17);var o=r.extend({mappable:{source:["frametime","midi","firstframetime","signals"],target:["layers","signals"]},props:{},session:{audio:["object",!0,function(){return{bufferLength:128,frequency:new Uint8Array(128),timeDomain:new Uint8Array(128)}}],midi:"state",frametime:["number",!0,0],firstframetime:["any",!0,function(){return performance.now()}],latency:["number",!0,0]},collections:{layers:i.extend({comparator:"zIndex",mainIndex:"name",model:function(e,t){var n=a[e.type]||a,r=new n(e,t);return r.on("change",function(){t.collection.trigger("change:layer",r)}),r}}),signals:n(21)},toJSON:function(){var e=r.prototype.toJSON.apply(this,arguments);return delete e.audio,e}});e.exports=o},,,,,,,,,,,function(e,t,n){"use strict";var r=VFDeps.State,i=r.extend({idAttribute:"name",typeAttribute:"type",props:{active:["boolean",!0,!0],mixBlendMode:{type:"string",default:"normal",required:!0,values:["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color"]},name:["string",!0,null],opacity:{type:"number",default:100},rotateX:{type:"number",default:0},rotateY:{type:"number",default:0},rotateZ:{type:"number",default:0},translateX:{type:"number",default:0},translateY:{type:"number",default:0},scaleX:{type:"number",default:100},scaleY:{type:"number",default:100},skewX:{type:"number",required:!1,default:0},skewY:{type:"number",required:!1,default:0},type:["string",!0,"default"],zIndex:["number",!0,0]},session:{uiState:{type:"string",values:["","dependency","dependent","focus","highlighted"],default:"",required:!0}},serialize:function(){var e=r.prototype.serialize.apply(this,arguments);return delete e.uiState,e},derived:{mappable:{deps:[],fn:function(){var e=this.constructor.prototype,t=Object.keys(e._definition||{}).concat(Object.keys(e._children||{}),Object.keys(e._collections||{})).filter(function(e){return e!==this.idAttribute&&e!==this.typeAttribute&&"uiState"!==e},this);return{source:[],target:t}}}}});e.exports=i},function(e,t,n){!function(t){"use strict";var r=t.VFDeps.State,i=t.VFDeps.Collection,a=n(14),o=r.extend({props:{name:["string",!0,null],arguments:["array",!0,function(){return[]}]}}),s=r.extend({idAttribute:"name",typeAttribute:"type",initialize:function(){this.on("change:result",function(){this.collection.parent.trigger(this.name,this.result)}),null!==this.input&&void 0!==this.input||(this.input=this.defaultValue)},mappable:{source:["result"],target:["input"]},props:{name:["string",!0,null],type:["string",!0,"default"],defaultValue:["any",!0,function(){return 1}],input:["any",!1,null]},session:{uiState:{type:"string",values:["","dependency","dependent","focus","highlighted"],default:"",required:!0}},collections:{transformations:i.extend({model:o})},derived:{result:{deps:["input","transformations"],fn:function(){return this.computeSignal()}}},computeSignal:function(e){return e=e||this.input,this.transformations.forEach(function(t){var n=[e].concat(t.arguments);e=a[t.name].apply(this,n)}),e}});s.types={},e.exports=s}("undefined"!=typeof window?window:self)},,function(e,t,n){"use strict";var r={};r["math.multiply"]=function(e,t){return e*t},r["math.add"]=function(e,t){return e+t},r["math.subtract"]=function(e,t){return e-t},r["math.modulo"]=function(e,t){return e%t},r["math.above"]=function(e,t){return e>t},r["math.aboveOrEqual"]=function(e,t){return e>=t},r["math.below"]=function(e,t){return e<t},r["math.belowOrEqual"]=function(e,t){return e<=t},r["math.within"]=function(e,t,n){return e<=n&&e>=t},Object.getOwnPropertyNames(Math).forEach(function(e){"constructor"!==e&&"function"==typeof Math[e]&&(r["math."+e]=Math[e])});var i="".constructor.prototype;Object.getOwnPropertyNames(i).forEach(function(e){"constructor"!==e&&"function"==typeof i[e]&&(r["string."+e]=function(t){var n=[].slice.apply(arguments).slice(1);i[e].apply(t,n)})}),r["string.toBool"]=function(e){return!(!e||"false"===e||"null"===e)},r["string.toInteger"]=function(e){return parseInt(e,10)},r["string.toFloat"]=function(e){return parseFloat(e)},r["string.toNumber"]=function(e){return Number(e)},e.exports=r},,function(module,exports,__webpack_require__){"use strict";var State=VFDeps.State,Collection=VFDeps.Collection,ScreenLayerState=__webpack_require__(11),CanvasLayer=State.extend({idAttribute:"name",initialize:function(){State.prototype.initialize.apply(this,arguments);var e=this,t=e.collection.parent;e.on("change",function(){t._changed={canvasLayers:t.canvasLayers.serialize()},t.trigger("change")})},cache:{},props:{duration:["number",!0,1e3],fps:["number",!0,16],weight:["number",!0,0],name:["string",!0,null],active:["boolean",!0,!0],opacity:["number",!0,100],blending:{type:"string",required:!0,default:"source-over",values:["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor"]},drawFunction:"any"},session:{uiState:{type:"string",values:["","dependency","dependent","focus","highlighted"],default:"",required:!0}},serialize:function(){var e,t=State.prototype.serialize.apply(this,arguments),n={},r=this.serializationProps.props||[];r.length&&(n.props={});var i=this.constructor.prototype._definition;for(e in t)n[e]=t[e],r.indexOf(e)>-1&&(n.props[e]=i[e]);var a=typeof this.drawFunction;return"function"===a?n.drawFunction=this.drawFunction.toString():"string"===a&&(n.drawFunction=this.drawFunction),n.name=this.name,delete n.uiState,n},derived:{mappable:{deps:ScreenLayerState.prototype._derived.mappable.deps,fn:function(){var e=ScreenLayerState.prototype._derived.mappable.fn.apply(this,arguments),t=e.target.filter(function(e){return["uiState","drawFunction","screenState","draw"].indexOf(e)<0});return{source:[],target:t}}},screenState:{deps:[],fn:function(){return this.collection.parent.collection.parent}},width:{deps:["screenState","screenState.width"],fn:function(){return this.screenState.width||400}},height:{deps:["screenState","screenState.height"],fn:function(){return this.screenState.height||300}},draw:{deps:["drawFunction"],fn:function(){var fn=this.drawFunction;if("string"==typeof fn)try{eval("fn = (function() { return "+this.drawFunction+"; })()")}catch(e){console.warn("draw function error",e)}return("function"==typeof fn?fn:function(){}).bind(this)}}}}),_CanvasLayersCache={},CanvasLayers=Collection.extend({mainIndex:CanvasLayer.prototype.idAttribute,comparator:"weight",model:function(e,t){var n={props:e.props||{},serializationProps:{props:[].concat(["active","blending","opacity","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY"],Object.keys(e.props||{}))}},r=_CanvasLayersCache[e.name]||CanvasLayer.extend(n);_CanvasLayersCache[e.name]=r;var i=new r(e,t);return i.on("change:weight",function(){i.collection.sort()}),t.init===!1&&i.initialize(),i}});module.exports=ScreenLayerState.canvas=ScreenLayerState.extend({collections:{canvasLayers:CanvasLayers}})},function(e,t,n){"use strict";var r=n(11);e.exports=r.img=r.extend({props:{src:["string",!0,null],backgroundSize:["string",!0,"cover"],backgroundPosition:["string",!0,"center"],backgroundRepeat:["string",!0,"no-repeat"]},initialize:function(){if(r.prototype.initialize.apply(this,arguments),!this.src)throw new Error("Missing src attribute for img layer")}})},function(e,t,n){"use strict";var r=n(11);e.exports=r.SVG=r.extend({props:{src:["string",!0,null],styles:["string",!0,""]},initialize:function(){if(r.prototype.initialize.apply(this,arguments),!this.src)throw new Error("Missing src attribute for SVG layer")}})},function(e,t,n){"use strict";var r=n(11);e.exports=r.video=r.extend({props:{src:["string",!0,null]},initialize:function(){if(r.prototype.initialize.apply(this,arguments),!this.src)throw new Error("Missing src attribute for video layer")}})},function(e,t,n){"use strict";var r=n(12),i=r.types.beatSignal=r.extend({session:{frametime:["number",!0,0]},mappable:{source:["result","timeBetweenBeats"],target:["input"]},derived:{result:{deps:["timeBetweenBeats","frametime"],fn:function(){return this.computeSignal()}},timeBetweenBeats:{deps:["input"],fn:function(){return 6e4/Math.max(this.input,1)}}},computeSignal:function(){var e=this.frametime,t=e?100-e%this.timeBetweenBeats/this.timeBetweenBeats*100:0,n=r.prototype.computeSignal.apply(this,[t]);return n}});e.exports=i},function(e,t,n){"use strict";var r=VFDeps.Collection,i=n(12);n(20),n(22),n(23);var a=r.extend({mainIndex:"name",model:function(e,t){var n=i.types[e.type]||i;return new n(e,t)}});e.exports=a},function(e,t,n){"use strict";var r=n(12),i={type:"number",required:!0,default:180,min:0,max:360},a={type:"number",required:!0,default:100,min:0,max:100},o=r.types.hslaSignal=r.extend({session:{hue:i,saturation:a,lightness:a,alpha:a},mappable:{source:["result","hue","saturation","lightness","alpha"],target:["hue","saturation","lightness","alpha"]},derived:{result:{deps:["hue","saturation","lightness","alpha"],fn:function(){return this.computeSignal()}}},computeSignal:function(){return"hsla("+Math.round(this.hue)+","+Math.round(this.saturation)+"%,"+Math.round(this.lightness)+"%,"+Math.round(this.alpha)/100+")"}});e.exports=o},function(e,t,n){"use strict";var r=n(12),i={type:"number",required:!0,default:180,min:0,max:255},a={type:"number",required:!0,default:100,min:0,max:100},o=r.types.rgbaSignal=r.extend({session:{red:i,green:i,blue:i,alpha:a},mappable:{source:["result","red","green","blue","alpha"],target:["red","green","blue","alpha"]},derived:{result:{deps:["red","green","blue","alpha"],fn:function(){return this.computeSignal()}}},computeSignal:function(){return"rgba("+Math.round(this.red)+","+Math.round(this.green)+","+Math.round(this.blue)+","+Math.round(this.alpha)/100+")"}});e.exports=o}]);
//# sourceMappingURL=1-build.js.map