{"version":3,"sources":["webpack:///./layer/img/state.js","webpack:///./layer/p5/state.js","webpack:///./layer/svg/state.js","webpack:///./layer/function-prologue.js","webpack:///./parameter/collection.js","webpack:///./programmable/mixin-state.js","webpack:///./layer/threejs/state.js","webpack:///./layer/txt/state.js","webpack:///./layer/video/state.js","webpack:///./screen/state.js","webpack:///./layer/canvas/programmable.js","webpack:///./layer/collection.js","webpack:///./layer/svg/extractor.js","webpack:///./layer/threejs/programmable.js","webpack:///./parameter/state.js","webpack:///./screen/clock.js","webpack:///./utils/object-path.js","webpack:///./layer/state.js","webpack:///./parameter/mixin.js","webpack:///./layer/canvas/state.js"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,CAAC,E;;;;;;;;ACnBD;AACA;;AAEA;AACA;AACA,8EAA8E;AAC9E,8EAA8E;AAC9E;AACA,CAAC;AACD,8B;;;;;;;;ACTA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA,4CAA4C,WAAW,EAAE;AACzD,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB,YAAY,GAAG,aAAa;AAClD;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA,kEAAkE,gBAAgB;AAClF,OAAO;AACP;;AAEA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,CAAC,E;;;;;;;;ACtGD;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACLA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,iC;;;;;;;;ACvBA;;AAEA,kEAAkE;AAClE;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,E;;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;AAEA,IAAI;AACJ;;AAEA,IAAI;AACJ;;AAEA,IAAI;AACJ;;AAEA,CAAC;AACD;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA,mCAAmC;AACnC;AACA;AACA,MAAM;AACN;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,CAAC;;AAED;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;AAID;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,4BAA4B,EAAE;AAC1E;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;AAID;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;AAID;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;AAID;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,CAAC;;AAED;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;;;;AAID;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,qEAAqE,EAAE;AACxH,kDAAkD,sEAAsE,EAAE;AAC1H,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE;AACtE;AACA;AACA;AACA,UAAU;AACV,QAAQ;;AAER;AACA,MAAM;;AAEN;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA;AACA,MAAM;;;;;AAKN,CAAC,G;;;;;;;;ACvdD;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,+B;;;;;;;;AChBA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,E;;;;;;;;ACfD;AACA;;AAEA;AACA;AACA,+CAA+C;AAC/C;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA,wCAAwC;AACxC;AACA;AACA;AACA,MAAM,EAAE;AACR;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;;;;;;;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC,E;;;;;;;;ACrCD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA,mBAAmB,2BAA2B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,kDAAkD,mCAAmC,EAAE;AACvF,oDAAoD,8BAA8B;;AAElF,4CAA4C,aAAa;;AAEzD;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,2B;;;;;;;ACtFA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;ACxBA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,4B;;;;;;;;AC3BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,uB;;;;;;;;AC5FA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,4B;;;;;;;;AC7DA;AACA;AACA;AACA;AACA,GAAG,2CAA2C;AAC9C,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,sDAAsD;AACtD,2CAA2C;AAC3C,8CAA8C;AAC9C;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;AAED;;AAEA,4B;;;;;;;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA,qEAAqE,iBAAiB;AACtF,OAAO;AACP,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL,GAAG;AACH,E;;;;;;;;ACzDA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,+C","file":"2.worker-build.js","sourcesContent":["'use strict';\nvar ScreenLayerState = require('./../state');\nmodule.exports = ScreenLayerState.types.img = ScreenLayerState.extend({\n  baseParameters: [\n    {name: 'src', type: 'string', default: ''}\n  ].concat(ScreenLayerState.prototype.baseParameters),\n\n  derived: {\n    src: {\n      deps: ['parameters.src'],\n      fn: function() {\n        return this.parameters.getValue('src');\n      }\n    }\n  },\n\n  initialize: function() {\n    ScreenLayerState.prototype.initialize.apply(this, arguments);\n  }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/img/state.js\n// module id = 10\n// module chunks = 2","'use strict';\nvar LayerState = require('./../state');\n\nvar P5LayerState = LayerState.types.p5 = LayerState.extend({\n  props: {\n    setupFunction: ['string', false, 'console.info(\"no p5 setupFunction set\");'],\n    drawFunction: ['string', false, 'console.info(\"no p5 updateFunction set\");']\n  }\n});\nmodule.exports = P5LayerState;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/p5/state.js\n// module id = 11\n// module chunks = 2","'use strict';\nvar ScreenLayerState = require('./../state');\nvar Extractor = require('./extractor');\n\nmodule.exports = ScreenLayerState.types.SVG = ScreenLayerState.extend({\n  baseParameters: [\n    {name: 'src', type: 'string', default: ''}\n  ].concat(ScreenLayerState.prototype.baseParameters),\n\n  props: {\n    svgStyles: ['object', true, function() { return {}; }]\n  },\n\n  session: {\n    content: ['string', false, '']\n  },\n\n  derived: {\n    src: {\n      deps: ['parameters.src'],\n      fn: function() {\n        return this.parameters.getValue('src');\n      }\n    },\n    mappable: {\n      deps: [],\n      fn: function() {\n        return {\n          source: [],\n          target: [\n            'parameters'\n          ]\n        };\n      }\n    }\n  },\n\n  initialize: function() {\n    var svgState = this;\n    ScreenLayerState.prototype.initialize.apply(svgState, arguments);\n\n    // load the svg string content from the worker only\n    if (!svgState.hasDOM) {\n      svgState.listenToAndRun(svgState, 'change:src', function() {\n        svgState.set({content: ''}, {silent: true});\n        svgState.loadSVG();\n      });\n    }\n\n    // only create an extractor for the state used in the controller\n    if (svgState.isControllerState) {\n      svgState.listenToAndRun(svgState, 'change:content', function() {\n        if (svgState.content) svgState.extractor = new Extractor({model: svgState});\n      });\n    }\n\n    svgState.listenTo(svgState.screenState, 'app:broadcast:bootstrap', function() {\n      svgState.loadSVG();\n    });\n  },\n\n  loadSVG: function(done) {\n    var state = this;\n    done = done || function(err/*, obj*/) {\n      if (err) {\n        // console.warn(err.message);\n        return;\n      }\n      // console.info('loaded');\n    };\n\n    var src = state.src;\n    if (!src) {\n      state.content = '';\n      return done(new Error('No src to load for ' + state.getId() + ' SVG layer'), state);\n    }\n\n    fetch(src)\n      .then(function(res) {\n        return res.text();\n      })\n      .then(function(string) {\n        state.content = string;\n        done(null, state);\n      })\n      .catch(function(err) {\n        state.content = '';\n        done(err, state);\n      });\n  },\n\n  serialize: function() {\n    var obj = ScreenLayerState.prototype.serialize.apply(this, arguments);\n    obj.content = this.content;\n    return obj;\n  },\n\n  toJSON: function() {\n    var obj = ScreenLayerState.prototype.toJSON.apply(this, arguments);\n    delete obj.content;\n    return obj;\n  }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/svg/state.js\n// module id = 12\n// module chunks = 2","'use strict';\nmodule.exports = `\nconst layer = this;\nconst width = layer.width || 400;\nconst height = layer.height || 300;\n`;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/function-prologue.js\n// module id = 127\n// module chunks = 2","'use strict';\nvar ParamState = require('./state');\nvar Collection = require('ampersand-collection');\n\nvar ParamCollection = Collection.extend({\n  mainIndex: 'name',\n  model: ParamState,\n\n  comparator: 'name',\n\n  toJSON: function (...args) {\n    return this.map(model => model.toJSON(...args));\n  },\n\n  getValue: function(name, defaultVal) {\n    var param = this.get(name);\n    if (!param) return defaultVal;\n    var val = param.value;\n    defaultVal = arguments.length === 2 ? defaultVal : param.default;\n    return val === null || typeof val === 'undefined' ? defaultVal : val;\n  }\n});\n\nmodule.exports = ParamCollection;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./parameter/collection.js\n// module id = 128\n// module chunks = 2","'use strict';\n\nmodule.exports = function programmableState(config, prototype = {}) {\n  // var update = config.update;\n  var setup = config.setup;\n\n  prototype.props = prototype.props || {};\n  prototype.derived = prototype.derived || {};\n\n  prototype.props.updateFunction = ['string', true, ''];\n\n  if (!setup) return prototype;\n\n  prototype.props.setupFunction = ['string', true, ''];\n\n  return prototype;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./programmable/mixin-state.js\n// module id = 129\n// module chunks = 2","'use strict';\nvar ScreenLayerState = require('./../state');\nvar State = require('ampersand-state');\nvar Collection = require('ampersand-collection');\nvar ParameterCollection = require('./../../parameter/collection');\nvar programmableMixin = require('./../../programmable/mixin-state');\n\n/***************************************\\\n *                                     *\n *                                     *\n *                                     *\n\\***************************************/\n\nvar Euler = State.extend({\n  props: {\n    x: ['number', true, 0],\n    y: ['number', true, 0],\n    z: ['number', true, 0]\n  }\n});\nvar Vector3 = State.extend({\n  props: {\n    x: ['number', true, 0],\n    y: ['number', true, 0],\n    z: ['number', true, 0]\n  }\n});\n// var Curve = State.extend({\n\n// });\n// var CurvePath = State.extend({\n\n// });\n// var Path = CurvePath.extend({\n\n// });\nvar Shape = State.extend({\n\n});\nvar ShapeCollection = Collection.extend({\n  model: Shape\n});\n\n\nvar Color = State.extend({\n  props: {\n    r: ['number', true, 122],\n    g: ['number', true, 122],\n    b: ['number', true, 122]\n  }\n});\n\n\n/***************************************\\\n *                                     *\n *                                     *\n *                                     *\n\\***************************************/\n\n\n\nvar ThreeState = State.extend({\n  idAttribute: 'name',\n  typeAttribute: 'type',\n  props: {\n    visible: ['boolean', true, true],\n    type: ['string', true, null],\n    name: ['string', true, null]\n  },\n  children: {\n    position: Vector3,\n    rotation: Euler,\n    scale: Vector3\n  }\n});\n\nfunction makeCollectionModel(StateKind) {\n  return function(attrs, opts) {\n    var Constructor = StateKind.types[attrs.type] || StateKind;\n    var state = new Constructor(attrs, opts);\n    return state;\n  };\n}\n\n\n// function collectionParse(data) {\n//   console.info('typeof data', typeof data);\n//   return data;\n// }\n\n\n// function collectionToJSON() {\n//   var data = {};\n//   this.forEach(function(model) {// jshint ignore:line\n//     data[model.getId()] = model.serialize();\n//     delete data[model.getId()][model.idAttribute];\n//   });\n//   // console.info('collectionToJSON', data);\n//   return data;\n// }\n\n\n\n/***************************************\\\n *                                     *\n *                                     *\n *                                     *\n\\***************************************/\nvar MaterialState = State.extend({\n  idAttribute: 'name',\n  typeAttribute: 'type',\n  props: {\n    type: ['string', false, null],\n    name: ['string', false, null]\n  },\n  children: {\n    color: Color\n  }\n});\n\nMaterialState.types = {};\n\n\n\nvar MaterialCollection = Collection.extend({\n  mainIndex: 'name',\n  // parse: collectionParse,\n  // toJSON: collectionToJSON,\n  // serialize: collectionToJSON,\n  model: makeCollectionModel(MaterialState)\n});\n\n\n\n/***************************************\\\n *                                     *\n *                                     *\n *                                     *\n\\***************************************/\n\nvar GeometryState = ThreeState.extend({\n  children: {\n    material: MaterialState\n  }\n});\n\nGeometryState.types = {};\n// BoxBufferGeometry\n// BoxGeometry\nGeometryState.types.box = GeometryState.extend({\n  signature: ['width', 'height', 'depth'],\n  threeClassName: 'BoxGeometry',\n  props: {\n    width: ['number', true, 5],\n    height: ['number', true, 5],\n    depth: ['number', true, 5],\n  }\n});\n// CircleBufferGeometry\n// CircleGeometry\nGeometryState.types.circle = GeometryState.extend({\n  signature: ['radius', 'segments', 'thetaStart', 'thetaLength'],\n  threeClassName: 'CircleGeometry',\n  props: {\n    radius: ['number', true, 10],\n    segments: ['number', true, 8],\n    thetaStart: ['number', true, 0],\n    thetaLength: ['number', true, Math.PI * 2]\n  }\n});\n// ConeBufferGeometry\n// ConeGeometry\nGeometryState.types.cone = GeometryState.extend({\n  signature: ['radius', 'height', 'radialSegments', 'heightSegments', 'openEnded', 'thetaStart', 'thetaLength'],\n  threeClassName: 'ConeGeometry',\n  props: {\n    radius: ['number', true, 10],\n    height: ['number', true, 10],\n    radialSegments: ['number', true, 8],\n    heightSegments: ['number', true, 1],\n    openEnded: ['boolean', true, false],\n    thetaStart: ['number', true, 0],\n    thetaLength: ['number', true, Math.PI * 2]\n  }\n});\n// CylinderBufferGeometry\n// CylinderGeometry\nGeometryState.types.cylinder = GeometryState.extend({\n  signature: [\n    'radiusTop',\n    'radiusBottom',\n    'height',\n    'radialSegments',\n    'heightSegments',\n    'openEnded',\n    'thetaStart',\n    'thetaLength'\n  ],\n  threeClassName: 'CylinderGeometry',\n  props: {\n    radiusTop: ['number', true, 10],\n    radiusBottom: ['number', true, 10],\n    height: ['number', true, 10],\n    radialSegments: ['number', true, 8],\n    heightSegments: ['number', true, 1],\n    openEnded: ['boolean', true, false],\n    thetaStart: ['number', true, 0],\n    thetaLength: ['number', true, Math.PI * 2]\n  }\n});\n// DodecahedronBufferGeometry\n// DodecahedronGeometry\n// EdgesGeometry\n// ExtrudeGeometry\nGeometryState.types.extrude = GeometryState.extend({\n  signature: ['shapes', 'options'],\n  threeClassName: 'ExtrudeGeometry',\n  collections: {\n    shapes: ShapeCollection\n  },\n  props: {\n    curveSegments: 'any',// int. number of points on the curves\n    steps: 'any',// int. number of points used for subdividing segements of extrude spline\n    amount: 'any',// int. Depth to extrude the shape\n    bevelEnabled: 'any',// bool. turn on bevel\n    bevelThickness: 'any',// float. how deep into the original shape bevel goes\n    bevelSize: 'any',// float. how far from shape outline is bevel\n    bevelSegments: 'any',// int. number of bevel layers\n    extrudePath: 'any',// THREE.CurvePath. 3d spline path to extrude shape along. (creates Frames if frames aren't defined)\n    frames: 'any',// THREE.TubeGeometry.FrenetFrames. containing arrays of tangents, normals, binormals\n    material: 'any',// int. material index for front and back faces\n    extrudeMaterial: 'any',// int. material index for extrusion and beveled faces\n    UVGenerator: 'any',// Object. object that provides UV generator functions\n  }\n});\n// IcosahedronBufferGeometry\n// IcosahedronGeometry\n// LatheBufferGeometry\n// LatheGeometry\n// OctahedronBufferGeometry\n// OctahedronGeometry\n// ParametricBufferGeometry\n// ParametricGeometry\nGeometryState.types.parametric = GeometryState.extend({\n  signature: ['func', 'slices', 'stacks'],\n  threeClassName: 'ParametricGeometry',\n  props: {\n    func: ['string', true, 'function(u, v) { return new THREE.Vector3(); }'],\n    slices: ['number', true, 5],\n    stacks: ['number', true, 5]\n  }\n});\n// PlaneBufferGeometry\n// PlaneGeometry\n// PolyhedronBufferGeometry\n// PolyhedronGeometry\n// RingBufferGeometry\n// RingGeometry\n// ShapeBufferGeometry\n// ShapeGeometry\n// SphereBufferGeometry\n// SphereGeometry\n// TetrahedronBufferGeometry\n// TetrahedronGeometry\n// TextGeometry\n// TorusBufferGeometry\n// TorusGeometry\n// TorusKnotBufferGeometry\n// TorusKnotGeometry\n// TubeGeometry\n// TubeBufferGeometry\n// WireframeGeometry\n\n\nvar GeometryCollection = Collection.extend({\n  mainIndex: 'name',\n  // parse: collectionParse,\n  // toJSON: collectionToJSON,\n  // serialize: collectionToJSON,\n  model: makeCollectionModel(GeometryState)\n});\n\n\n\n/***************************************\\\n *                                     *\n *                                     *\n *                                     *\n\\***************************************/\nvar LightState = ThreeState.extend({\n  props: {\n    intensity: ['number', true, 1]\n  },\n  children: {\n    color: Color\n  }\n});\n\nLightState.types = {};\n// AmbientLight\nLightState.types.ambient = LightState.extend({\n  signature: [],\n  threeClassName: 'AmbientLight',\n});\n// DirectionalLight\nLightState.types.directonal = LightState.extend({\n  signature: [],\n  threeClassName: 'DirectionalLight',\n  children: {\n    lookAt: Vector3\n  }\n});\n// HemisphereLight\n// Vector3Light\n// RectAreaLight\n// SpotLight\n\n\n\n\nvar LightCollection = Collection.extend({\n  mainIndex: 'name',\n  // parse: collectionParse,\n  // toJSON: collectionToJSON,\n  // serialize: collectionToJSON,\n  model: makeCollectionModel(LightState)\n});\n\n\n\n/***************************************\\\n *                                     *\n *                                     *\n *                                     *\n\\***************************************/\nvar CameraState = ThreeState.extend({\n  children: {\n    lookAt: Vector3\n  }\n});\n\nCameraState.types = {};\n// CubeCamera\n// OrthographicCamera\nCameraState.types.orthographic = CameraState.extend({\n  signature: ['left', 'right', 'top', 'bottom', 'near', 'far'],\n  threeClassName: 'OrthographicCamera',\n  props: {\n    left: ['number', true, 80],\n    right: ['number', true, 80],\n    top: ['number', true, 60],\n    bottom: ['number', true, 60],\n    near: ['number', true, 0.1],\n    far: ['number', true, 2000]\n  }\n});\n// PerspectiveCamera\nCameraState.types.perspective = CameraState.extend({\n  signature: ['fov', 'aspect', 'near', 'far'],\n  threeClassName: 'PerspectiveCamera',\n  props: {\n    focus: ['number', true, 10],\n    fov: ['number', true, 50],\n    aspect: ['number', true, 1],\n    near: ['number', true, 0.1],\n    far: ['number', true, 2000],\n    zoom: ['number', true, 1]\n  }\n});\n// StereoCamera\n\n\n\nvar CameraCollection = Collection.extend({\n  mainIndex: 'name',\n  // parse: collectionParse,\n  // toJSON: collectionToJSON,\n  // serialize: collectionToJSON,\n  model: makeCollectionModel(CameraState)\n});\n\n\n\n/***************************************\\\n *                                     *\n *                                     *\n *                                     *\n\\***************************************/\nvar LoaderState = ThreeState.extend({\n  props: {\n    path: ['string', false, ''],\n    src: ['string', true, ''],\n  },\n  children: {\n    material: MaterialState\n  }\n});\n\nLoaderState.types = {};\nLoaderState.types.obj = LoaderState.extend({});\nLoaderState.types.objmtl = LoaderState.extend({\n  props: {\n    mtl: ['string', true, '']\n  }\n});\n\nvar LoaderCollection = Collection.extend({\n  mainIndex: 'name',\n  model: makeCollectionModel(LoaderState)\n});\n\n\n\n/***************************************\\\n *                                     *\n *                                     *\n *                                     *\n\\***************************************/\nvar programmable = require('./programmable');\nmodule.exports = ScreenLayerState.types.threejs = ScreenLayerState.extend(programmableMixin(programmable, {\n  props: {\n    currentCamera: ['string', false, null],\n    setupFunction: ['string', true, 'function() { console.info(\\'missing setupFunction for %s\\', layer.model.getId()); }'],\n    updateFunction: ['string', true, 'function() { console.info(\\'missing updateFunction for %s\\', layer.model.getId()); }']\n  },\n\n  collections: {\n    parameters: ParameterCollection,\n    //\n    geometries: GeometryCollection,\n    lights: LightCollection,\n    cameras: CameraCollection,\n    materials: MaterialCollection,\n    //\n    loaders: LoaderCollection\n  },\n\n  // parse: function(data) {\n  //   console.info('parse three data', data);\n\n  //   [\n  //     'geometries',\n  //     'lights',\n  //     'cameras',\n  //     'materials'\n  //   ].forEach(function(collectionName) {\n  //     data[collectionName] = Object.keys(data[collectionName] || {}).map(function(name) {\n  //       var obj = data[collectionName][name];\n  //       obj.name = name;\n  //       return obj;\n  //     });\n  //   });\n\n  //   return data;\n  // },\n\n  // toJSON: function() {\n  //   var data = ScreenLayerState.prototype.toJSON.apply(this, arguments);\n  //   // console.info('toJSON', data.cameras);\n  //   return data;\n  // },\n\n  // serialize: function() {\n  //   var data = ScreenLayerState.prototype.serialize.apply(this, arguments);\n  //   // console.info('serialize', data.cameras);\n  //   return data;\n  // },\n\n\n\n\n}));\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/threejs/state.js\n// module id = 13\n// module chunks = 2","'use strict';\nvar LayerState = require('./../state');\nvar TxtLayerState = LayerState.types.txt = LayerState.extend({\n  baseParameters: [\n    {name: 'text', type: 'string', default: ''}\n  ].concat(LayerState.prototype.baseParameters),\n\n  derived: {\n    text: {\n      deps: ['parameters.text'],\n      fn: function() {\n        return this.parameters.getValue('text');\n      }\n    }\n  }\n});\nmodule.exports = TxtLayerState;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/txt/state.js\n// module id = 14\n// module chunks = 2","'use strict';\nvar ScreenLayerState = require('./../state');\nmodule.exports = ScreenLayerState.types.video = ScreenLayerState.extend({\n  baseParameters: [\n    {name: 'src', type: 'string', default: ''}\n  ].concat(ScreenLayerState.prototype.baseParameters),\n\n  derived: {\n    src: {\n      deps: ['parameters.src'],\n      fn: function() {\n        return this.parameters.getValue('src');\n      }\n    }\n  }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/video/state.js\n// module id = 15\n// module chunks = 2","'use strict';\n/* global Uint8Array*/\n\nvar State = require('ampersand-state');\nvar ScreenState = State.extend({\n  initialize: function(attributes, options = {}) {\n    this._isControllerState = !!options.router;\n  },\n\n  mappable: {\n    source: ['midi', 'clock'],\n    target: ['layers', 'clock']\n  },\n\n  session: {\n    audio: ['object', true, function() { return {\n      bufferLength: 128,\n      frequency: new Uint8Array(128),\n      timeDomain: new Uint8Array(128)\n    }; }],\n    latency: ['number', true, 0]\n  },\n\n  children: {\n    clock: require('./clock')\n  },\n\n  collections: {\n    layers: require('./../layer/collection')\n  },\n\n  derived: {\n    frametime: {\n      deps: ['clock.frametime'],\n      fn: function() {\n        return this.clock.frametime;\n      }\n    },\n    hasDOM: {\n      deps: [],\n      fn: function() {\n        return typeof DedicatedWorkerGlobalScope === 'undefined';\n      }\n    },\n    isControllerState: {\n      deps: [],\n      fn: function() {\n        return this._isControllerState;\n      }\n    },\n    location: {\n      deps: ['hasDOM', 'isControllerState'],\n      fn: function() {\n        return this.isControllerState ? 'control' : (this.hasDOM ? 'screen' : 'worker');\n      }\n    }\n  },\n\n  _log: function(...args) {\n    var color = this.location === 'screen' ? 'lightblue' : (this.location === 'control' ? 'lightgreen' : 'pink');\n    var txt = args.shift();\n    console.log('%c'+ this.location[0].toUpperCase() + ': ' + txt, 'color:' + color, ...args);\n  },\n\n  toJSON: function() {\n    var obj = State.prototype.toJSON.apply(this, arguments);\n    delete obj.audio;\n    return obj;\n  }\n});\n\nmodule.exports = ScreenState;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./screen/state.js\n// module id = 2\n// module chunks = 2","'use strict';\nvar layerPrologue = require('./../function-prologue');\nmodule.exports = {\n  setup: false,\n  update: {\n    prologue: layerPrologue,// + canvasPrologue,\n    argNames: [\n      'frametime',\n      'bpm',\n      'beatnum',\n      'beatprct',\n      'beatlength',\n\n      'bufferLength',\n      'vol',\n      'frq',\n\n      'param',\n\n      'ctx',\n\n      'utils',\n      'grid',\n      'distribute',\n      'repeat',\n      'log',\n      'txt',\n      'dot',\n      'circle',\n      'polygone',\n      'line',\n      'cacheContext',\n      'restoreContexts'\n    ]\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/canvas/programmable.js\n// module id = 297\n// module chunks = 2","'use strict';\nvar assign = require('lodash.assign');\nvar Collection = require('ampersand-collection');\nvar LayerState = require('./state');\nrequire('./canvas/state');\nrequire('./video/state');\nrequire('./svg/state');\nrequire('./img/state');\nrequire('./txt/state');\nrequire('./p5/state');\nrequire('./threejs/state');\n\nmodule.exports = Collection.extend({\n  comparator: 'zIndex',\n  mainIndex: 'name',\n  model: function(attrs, opts) {\n    var Constructor = LayerState.types[attrs.type] || LayerState;\n    var state = new Constructor(attrs, opts);\n    // state.on('change', function() {\n    //   opts.collection.trigger('change:layer', state);\n    // });\n    return state;\n  },\n\n  toJSON: function () {\n    return this.map(function (model) {\n      if (model.toJSON) {\n        return model.toJSON();\n      }\n      else {\n        var out = {};\n        assign(out, model);\n        delete out.collection;\n        return out;\n      }\n    });\n  }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/collection.js\n// module id = 298\n// module chunks = 2","'use strict';\nvar State = require('ampersand-state');\n\nvar Extractor = State.extend({\n  autoRender: true,\n  template: '<div style=\"display: none\"></div>',\n\n  extractStyles: function() {\n    var styles = {};\n    var existingStyles = this.model.svgStyles || {};\n\n    this.svg.querySelectorAll('[style][id]').forEach(function(styledEl) {\n      styles['#' + styledEl.id] = existingStyles['#' + styledEl.id] || styledEl.getAttribute('style');\n      styledEl.style = null;\n    });\n\n    return styles;\n  },\n\n  removeStylesFromContent: function() {\n    this.svg.querySelectorAll('[style][id]').forEach(function(styledEl) {\n      styledEl.style = null;\n    });\n    return this;\n  },\n\n  setPathLengths: function() {\n    var paths = this.el.querySelectorAll('path');\n    for (var p = 0; p < paths.length; p++) {\n      paths[p].style.setProperty('--path-length', paths[p].getTotalLength());\n    }\n    return this;\n  },\n\n  extractProps: function() {\n    var props = [];\n    var name, value;\n\n    for (var p = 0; p < this.svg.style.length; p++) {\n      name = this.svg.style[p].slice(2);\n      value = this.svg.style.getPropertyValue(name).trim();\n      props.push({\n        name: name,\n        value: value,\n        default: value\n      });\n    }\n\n    this.svg.style = null;\n\n    var previousParameters = this.model.parameters.serialize();\n    return props.concat(previousParameters);\n  },\n\n  extract: function() {\n    if (!this.el || this.el.innerHTML === this.model.content) return;\n    this.el.innerHTML = this.model.content;\n\n    this.svg = this.el.querySelector('svg');\n    if (!this.svg) return;\n    var svgState = this.model;\n\n    var layer = {};\n    layer[svgState.idAttribute] = svgState.getId();\n\n    layer.svgStyles = Object.keys(svgState.svgStyles).length ? this.removeStylesFromContent().model.svgStyles : this.extractStyles();\n\n    this.model.parameters.set(this.setPathLengths().extractProps());\n    layer.parameters = this.model.parameters.serialize();\n\n    layer.content = this.el.innerHTML;\n\n    svgState.once('change:svgStyles', function() { svgState.trigger('svg:extracted'); });\n    svgState.trigger('sendCommand', 'updateLayer', {layer: layer, broadcast: true});\n\n    svgState.set('content', layer.content, {silent: true});\n\n    return this;\n  },\n\n  initialize: function(options) {\n    this.model = options.model;\n    this.el = document.createElement('div');\n    this.listenToAndRun(this.model, 'change:content', this.extract);\n  }\n});\nmodule.exports = Extractor;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/svg/extractor.js\n// module id = 299\n// module chunks = 2","var layerPrologue = require('./../function-prologue');\nmodule.exports = {\n  setup: {\n    prologue: layerPrologue,\n    argNames: []\n  },\n  update: {\n    prologue: layerPrologue,\n    argNames: [\n      'frametime',\n      'bpm',\n      'beatnum',\n      'beatprct',\n      'beatlength',\n\n      'bufferLength',\n      'vol',\n      'frq',\n\n      'param',\n      'scene',\n      'utils'\n    ]\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/threejs/programmable.js\n// module id = 300\n// module chunks = 2","'use strict';\nvar State = require('ampersand-state');\n\nvar ParamState = State.extend({\n  idAttribute: 'name',\n\n  mappable: {\n    target: ['value']\n  },\n\n  props: {\n    name: ['string', true, ''],\n    type: ['string', false, 'any'],\n    value: ['any', false, ''],\n    default: ['any', false, '']\n  },\n\n  derived: {\n    modelPath: {\n      deps: ['name'],\n      fn: function() {\n        return this.collection.parent.modelPath + '.parameters.' + this.name;\n      }\n    }\n  }\n});\n\nmodule.exports = ParamState;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./parameter/state.js\n// module id = 301\n// module chunks = 2","'use strict';\nvar State = require('ampersand-state');\n\nvar Clock = State.extend({\n  play: function() {\n    var now = Date.now();\n    this.starttime = this.pausetime ? this.starttime + (now - this.pausetime) : now;\n    this.pausetime = 0;\n    return this.refresh();\n  },\n\n  pause: function() {\n    this.pausetime = Date.now();\n    return this.refresh();\n  },\n\n  stop: function() {\n    var now = Date.now();\n    this.pausetime = now;\n    this.starttime = now;\n    this.frametime = 0;\n    return this;\n  },\n\n  refresh: function() {\n    if (this.playing) this.frametime = Date.now() - this.starttime;\n    this.duration = Math.max(this.duration, this.frametime);\n    return this;\n  },\n\n  props: {\n    pausetime: ['number', true, 0],\n    starttime: ['number', true, Date.now],\n    frametime: ['number', true, 0],\n    beatdelay: ['number', true, 0],\n    bpm: ['number', true, 120]\n  },\n\n  mappable: {\n    source: ['frametime', 'pausetime', 'starttime', 'bpm', 'beatprct', 'beatnum', 'beatlength'],\n    target: ['beatdelay', 'bpm']\n  },\n\n  derived: {\n    modelPath: {\n      deps: [],\n      fn: function() {\n        return 'clock';\n      }\n    },\n    playing: {\n      deps: ['pausetime'],\n      fn: function() {\n        return !this.pausetime;\n      }\n    },\n    paused: {\n      deps: ['pausetime', 'starttime'],\n      fn: function() {\n        return this.pausetime > this.starttime;\n      }\n    },\n    stopped: {\n      deps: ['pausetime', 'starttime'],\n      fn: function() {\n        return this.pausetime === this.starttime;\n      }\n    },\n    beatprct: {\n      deps: ['beatlength', 'frametime'],\n      fn: function() {\n        var ft = this.frametime;\n        var bl = this.beatlength;\n        return !ft ? 0 : (100 - (((ft % bl) / bl) * 100));\n      }\n    },\n    beatnum: {\n      deps: ['beatlength', 'beatdelay', 'frametime'],\n      fn: function() {\n        var ft = this.frametime + this.beatdelay;\n        return ft ? Math.floor(ft / this.beatlength) : 0;\n      }\n    },\n    beatlength: {\n      deps: ['bpm'],\n      fn: function() {\n        return (60 * 1000) / Math.max(this.bpm, 1);\n      }\n    }\n  }\n});\n\nmodule.exports = Clock;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./screen/clock.js\n// module id = 302\n// module chunks = 2","'use strict';\n\nfunction isCollectionOfParent(o, p) {\n  if (!p || !p._collections) return;\n  for (var name in p._collections) {\n    if (p[name] === o.collection) return name + '.' + o.getId();\n  }\n}\n\nfunction isChildOfParent(o, p) {\n  if (!p || !p._children) return;\n  for (var name in p._children) {\n    if (p[name] === o) return name;\n  }\n}\n\nfunction isPropOfParent(o, p) {\n  if (!p) return;\n  for (var name in p) {\n    if (p[name] === o) return name;\n  }\n}\n\nvar _paths = {};\nfunction objectPath(state) {\n  if (!state) return null;\n  if (_paths[state.cid]) return _paths[state.cid];\n  var parts = [];\n\n\n  function up(instance) {\n    var collectionName = instance.collection ?\n                          isCollectionOfParent(instance, instance.collection.parent) :\n                          null;\n    if (collectionName) {\n      parts.unshift(collectionName);\n      return up(instance.collection.parent);\n    }\n\n    var childName = isChildOfParent(instance, instance.parent);\n    if (childName) {\n      parts.unshift(childName);\n      return up(instance.parent);\n    }\n\n\n    var propName = isPropOfParent(instance, instance.parent);\n    if (propName) {\n      parts.unshift(propName);\n      return up(instance.parent);\n    }\n\n    if (instance.parent) up(instance.parent);\n  }\n\n  up(state);\n\n  _paths[state.cid] = parts.join('.');\n  return _paths[state.cid];\n}\n\nmodule.exports = objectPath;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./utils/object-path.js\n// module id = 308\n// module chunks = 2","'use strict';\nvar objectPath = require('./../utils/object-path');\nvar parameterizedState = require('./../parameter/mixin');\nvar LayerState = parameterizedState([\n  {name: 'zIndex', type: 'number', default: 0},\n  {name: 'active', type: 'boolean', default: true}\n]).extend({\n  idAttribute: 'name',\n  typeAttribute: 'type',\n\n  props: {\n    name: ['string', true, null],\n    type: ['string', true, 'default'],\n    layerStyles: ['string', false, '']\n  },\n\n  derived: {\n    modelPath: {\n      deps: ['name'],\n      fn: function() {\n        return objectPath(this);\n      }\n    },\n    screenState: {\n      deps: ['collection', 'collection.parent'],\n      fn: function() {\n        return this.collection.parent;\n      }\n    },\n    hasDOM: {\n      deps: ['screenState'],\n      fn: function() {\n        return this.screenState && this.screenState.hasDOM;\n      }\n    },\n    isControllerState: {\n      deps: ['screenState'],\n      fn: function() {\n        return this.screenState && this.screenState.isControllerState;\n      }\n    },\n    location: {\n      deps: ['isControllerState', 'hasDOM'],\n      fn: function() {\n        return this.screenState ? this.screenState.location : false;\n      }\n    },\n\n    mappable: {\n      deps: [],\n      fn: function() {\n        var proto = this.constructor.prototype;\n        var keys = Object.keys(proto._definition || {}).concat(\n          Object.keys(proto._children || {}),\n          Object.keys(proto._collections || {})\n        ).filter(function(key) {\n          return key !== this.idAttribute && key !== this.typeAttribute;\n        }, this);\n\n        return {\n          source: [],\n          target: keys\n        };\n      }\n    }\n  },\n\n  _log: function(...args) {\n    this.screenState._log(...args);\n  }\n});\n\nLayerState.types = {};\n\nmodule.exports = LayerState;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/state.js\n// module id = 4\n// module chunks = 2","'use strict';\nvar AmpersandState = require('ampersand-state');\nvar ParameterCollection = require('./collection');\nmodule.exports = function parameterizedState(baseParameters, State = AmpersandState) {\n  var derived = {};\n  baseParameters.forEach(function(param) {\n    derived[param.name] = {\n      deps: ['parameters.' + param.name],\n      fn: function() {\n        return this.parameters.getValue(param.name);\n      }\n    };\n  });\n\n  return State.extend({\n    initialize: function() {\n      var state = this;\n      State.prototype.initialize.apply(state, arguments);\n\n      state._ensureBaseParameters();\n\n      state.listenToAndRun(state.parameters, 'change', function() {\n        state.trigger('change:parameters', state, state.parameters, {parameters: true});\n      });\n    },\n\n    collections: {\n      parameters: ParameterCollection\n    },\n\n    baseParameters: baseParameters,\n\n    derived: derived,\n\n    // is only needed for derived updates, the non-baseParameters do not haved derived\n    _bindValueChange: function(paramState) {\n      if (!paramState) return;\n      this.listenTo(paramState, 'change:value', function(...args) {\n        this.trigger('change:parameters.' + paramState.name, ...args);\n      });\n    },\n\n    // in order to \"clear\" the cached value of the derived\n    _ensureBaseParameters: function(definition = []) {\n      (this.baseParameters || [])\n        .concat(definition)\n        .forEach(function(parameterDef) {\n          var existing = this.parameters.get(parameterDef.name);\n          if (!existing) {\n            var created = this.parameters.add(parameterDef);\n            this._bindValueChange(created);\n            created.value = parameterDef.default;\n          }\n        }, this);\n      return this;\n    },\n  });\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./parameter/mixin.js\n// module id = 78\n// module chunks = 2","'use strict';\nvar ScreenLayerState = require('./../state');\n\nvar parameterizedState = require('./../../parameter/mixin');\nvar baseParameters = ScreenLayerState.prototype.baseParameters.concat([\n  {name: 'clear', type: 'number', default: 1, min: 0, max: Infinity}\n]);\n\nvar programmableState = require('./../../programmable/mixin-state');\n\nvar prototype = {\n};\n\nvar programmable = require('./programmable');\nScreenLayerState.types.canvas = parameterizedState(baseParameters, ScreenLayerState)\n                                .extend(programmableState(programmable, prototype));\n\nmodule.exports = ScreenLayerState.types.canvas;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/canvas/state.js\n// module id = 9\n// module chunks = 2"],"sourceRoot":""}